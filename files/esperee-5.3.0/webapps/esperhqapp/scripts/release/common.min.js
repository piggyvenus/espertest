function NameFunctionPair(name,callback){this.name=name;this.callback=callback}function LogEntryColl(limit){this.entries=[];this.addEntry=function(msg){this.entries.push({date:new Date,msg:msg});if(this.entries.length>limit)this.entries.shift()};this.toString=function(){var text="";var delimiter="";for(var i=0;i<this.entries.length;i++){text+=delimiter;var row=this.entries[i];text+=HQStringUtil.formatDateAndText(row.date,row.msg);delimiter="\n"}return text}}
function EventTarget(){this._listeners={}}
EventTarget.prototype={constructor:EventTarget,addListener:function(type,listener){if(typeof this._listeners[type]=="undefined")this._listeners[type]=[];this._listeners[type].push(listener)},fire:function(event){if(typeof event=="string")event={type:event};if(!event.target)event.target=this;if(!event.type)throw new Error("Event object missing 'type' property.");if(this._listeners[event.type]instanceof Array){var listeners=this._listeners[event.type];for(var i=0,len=listeners.length;i<len;i++)listeners[i].call(this,
event)}},removeListener:function(type,listener){if(this._listeners[type]instanceof Array){var listeners=this._listeners[type];for(var i=0,len=listeners.length;i<len;i++)if(listeners[i]===listener){listeners.splice(i,1);break}}}};function BrowserClosedEventTarget(){EventTarget.call(this)}BrowserClosedEventTarget.prototype=new EventTarget;BrowserClosedEventTarget.prototype.constructor=BrowserClosedEventTarget;BrowserClosedEventTarget.prototype.fireBrowserClosed=function(){this.fire(HQ_EVENTTARGET_TYPE.BROWSER_CLOSED.name)};
function DialogClosedEventTarget(){EventTarget.call(this)}DialogClosedEventTarget.prototype=new EventTarget;DialogClosedEventTarget.prototype.constructor=DialogClosedEventTarget;DialogClosedEventTarget.prototype.fireDialogClosed=function(){this.fire(HQ_EVENTTARGET_TYPE.DIALOG_CLOSED.name)};function EventletContainerEventTarget(){EventTarget.call(this)}EventletContainerEventTarget.prototype=new EventTarget;EventletContainerEventTarget.prototype.constructor=EventletContainerEventTarget;
EventletContainerEventTarget.prototype.fireClear=function(){this.fire(HQ_EVENTTARGET_TYPE.CLEAR.name)};EventletContainerEventTarget.prototype.fireEventletClosed=function(){this.fire(HQ_EVENTTARGET_TYPE.EVENTLET_CLOSED.name)};EventletContainerEventTarget.prototype.fireSuspendDiscard=function(){this.fire(HQ_EVENTTARGET_TYPE.SUSPEND_DISCARD.name)};EventletContainerEventTarget.prototype.fireSuspendBuffer=function(){this.fire(HQ_EVENTTARGET_TYPE.SUSPEND_BUFFER.name)};
EventletContainerEventTarget.prototype.fireResume=function(){this.fire(HQ_EVENTTARGET_TYPE.RESUME.name)};EventletContainerEventTarget.prototype.fireAbout=function(){this.fire(HQ_EVENTTARGET_TYPE.ABOUT.name)};EventletContainerEventTarget.prototype.fireRetainSettings=function(){this.fire(HQ_EVENTTARGET_TYPE.RETAINSETTINGS.name)};EventletContainerEventTarget.prototype.fireEventletSettings=function(){this.fire(HQ_EVENTTARGET_TYPE.EVENTLETSETTINGS.name)};
EventletContainerEventTarget.prototype.fireTrace=function(message){this.fire({type:HQ_EVENTTARGET_TYPE.TRACE.name,text:message})};EventletContainerEventTarget.prototype.fireError=function(message){this.fire({type:HQ_EVENTTARGET_TYPE.ERROR.name,text:message})};function HQPropertyDesc(propertyName,transformationFunc){this.propertyName=propertyName;this.transformationFunc=transformationFunc}function NumberTotalNullable(){this.nums=[]}NumberTotalNullable.prototype.add=function(num){this.nums.push(num)};
NumberTotalNullable.prototype.get=function(){var total=0;for(var i=0;i<this.nums.length;i++){var num=this.nums[i];if(typeof num=="number")total+=num;else return null}if(this.nums.length==0)return null;return total};CodeMirror.defineMode("sql",function(config,parserConfig){var client=parserConfig.client||{},atoms=parserConfig.atoms||{"false":true,"true":true,"null":true},builtin=parserConfig.builtin||{},keywords=parserConfig.keywords||{},operatorChars=parserConfig.operatorChars||/^[*+\-%<>!=&|~^]/,support=parserConfig.support||{},hooks=parserConfig.hooks||{},dateSQL=parserConfig.dateSQL||{"date":true,"time":true,"timestamp":true};function tokenBase(stream,state){var ch=stream.next();if(hooks[ch]){var result=
hooks[ch](stream,state);if(result!==false)return result}if(ch=="0"&&stream.match(/^[xX][0-9a-fA-F]+/)||(ch=="x"||ch=="X")&&stream.match(/^'[0-9a-fA-F]+'/))return"number";else if((ch=="b"||ch=="B")&&stream.match(/^'[01]+'/)||ch=="0"&&stream.match(/^b[01]+/))return"number";else if(ch.charCodeAt(0)>47&&ch.charCodeAt(0)<58){stream.match(/^[0-9]*\.?[0-9]+([eE][-+]?[0-9]+)?/);return"number"}else if(ch=="?"&&(stream.eatSpace()||stream.eol()||stream.eat(";")))return"variable-3";else if(ch=='"'||ch=="'"){state.tokenize=
tokenLiteral(ch);return state.tokenize(stream,state)}else if(/^[\(\),\;\[\]]/.test(ch))return null;else if(ch=="#"||ch=="-"&&stream.eat("-")&&stream.eat(" ")){stream.skipToEnd();return"comment"}else if(ch=="/"&&stream.eat("*")){state.tokenize=tokenComment;return state.tokenize(stream,state)}else if(ch=="."){if(stream.match(/^[0-9eE]+/)&&support.zerolessFloat==true)return"number";if(stream.match(/^[a-zA-Z_]+/)&&support.ODBCdotTable==true)return"variable-2"}else if(operatorChars.test(ch)){stream.eatWhile(operatorChars);
return null}else if(ch=="{"&&(stream.match(/^( )*(d|D|t|T|ts|TS)( )*'[^']*'( )*}/)||stream.match(/^( )*(d|D|t|T|ts|TS)( )*"[^"]*"( )*}/)))return"number";else{stream.eatWhile(/^[_\w\d]/);var word=stream.current().toLowerCase();if(dateSQL.hasOwnProperty(word)&&(stream.match(/^( )+'[^']*'/)||stream.match(/^( )+"[^"]*"/)))return"number";if(atoms.hasOwnProperty(word))return"atom";if(builtin.hasOwnProperty(word))return"builtin";if(keywords.hasOwnProperty(word))return"keyword";if(client.hasOwnProperty(word))return"string-2";
return null}}function tokenLiteral(quote){return function(stream,state){var escaped=false,ch;while((ch=stream.next())!=null){if(ch==quote&&!escaped){state.tokenize=tokenBase;break}escaped=!escaped&&ch=="\\"}return"string"}}function tokenComment(stream,state){while(true)if(stream.skipTo("*")){stream.next();if(stream.eat("/")){state.tokenize=tokenBase;break}}else{stream.skipToEnd();break}return"comment"}function pushContext(stream,state,type){state.context={prev:state.context,indent:stream.indentation(),
col:stream.column(),type:type}}function popContext(state){state.indent=state.context.indent;state.context=state.context.prev}return{startState:function(){return{tokenize:tokenBase,context:null}},token:function(stream,state){if(stream.sol())if(state.context&&state.context.align==null)state.context.align=false;if(stream.eatSpace())return null;var style=state.tokenize(stream,state);if(style=="comment")return style;if(state.context&&state.context.align==null)state.context.align=true;var tok=stream.current();
if(tok=="(")pushContext(stream,state,")");else if(tok=="[")pushContext(stream,state,"]");else if(state.context&&state.context.type==tok)popContext(state);return style},indent:function(state,textAfter){var cx=state.context;if(!cx)return CodeMirror.Pass;if(cx.align)return cx.col+(textAfter.charAt(0)==cx.type?0:1);else return cx.indent+config.indentUnit}}});
(function(){function hookIdentifier(stream){var escaped=false,ch;while((ch=stream.next())!=null){if(ch=="`"&&!escaped)return"variable-2";escaped=!escaped&&ch=="`"}return null}function hookVar(stream){if(stream.eat("@")){stream.match(/^session\./);stream.match(/^local\./);stream.match(/^global\./)}if(stream.eat("'")){stream.match(/^.*'/);return"variable-2"}else if(stream.eat('"')){stream.match(/^.*"/);return"variable-2"}else if(stream.eat("`")){stream.match(/^.*`/);return"variable-2"}else if(stream.match(/^[0-9a-zA-Z$\.\_]+/))return"variable-2";
return null}function hookClient(stream){return stream.match(/^[a-zA-Z]\b/)?"variable-2":null}var sqlKeywords="alter and as asc between by count create delete desc distinct drop from having in insert into is join like not on or order select set table union update values where ";function set(str){var obj={},words=str.split(" ");for(var i=0;i<words.length;++i)obj[words[i]]=true;return obj}CodeMirror.defineMIME("text/x-sql",{name:"sql",keywords:set(sqlKeywords+"begin"),builtin:set("bool boolean bit blob enum long longblob longtext medium mediumblob mediumint mediumtext time timestamp tinyblob tinyint tinytext text bigint int int1 int2 int3 int4 int8 integer float float4 float8 double char varbinary varchar varcharacter precision real date datetime year unsigned signed decimal numeric"),
atoms:set("false true null unknown"),operatorChars:/^[*+\-%<>!=]/,dateSQL:set("date time timestamp"),support:set("ODBCdotTable")});CodeMirror.defineMIME("text/x-mysql",{name:"sql",client:set("charset clear connect edit ego exit go help nopager notee nowarning pager print prompt quit rehash source status system tee"),keywords:set(sqlKeywords+"accessible action add after algorithm all analyze asensitive at authors auto_increment autocommit avg avg_row_length before binary binlog both btree cache call cascade cascaded case catalog_name chain change changed character check checkpoint checksum class_origin client_statistics close coalesce code collate collation collations column columns comment commit committed completion concurrent condition connection consistent constraint contains continue contributors convert cross current_date current_time current_timestamp current_user cursor data database databases day_hour day_microsecond day_minute day_second deallocate dec declare default delay_key_write delayed delimiter des_key_file describe deterministic dev_pop dev_samp deviance directory disable discard distinctrow div dual dumpfile each elseif enable enclosed end ends engine engines enum errors escape escaped even event events every execute exists exit explain extended fast fetch field fields first flush for force foreign found_rows full fulltext function general global grant grants group groupby_concat handler hash help high_priority hosts hour_microsecond hour_minute hour_second if ignore ignore_server_ids import index index_statistics infile inner innodb inout insensitive insert_method install interval invoker isolation iterate key keys kill language last leading leave left level limit linear lines list load local localtime localtimestamp lock logs low_priority master master_heartbeat_period master_ssl_verify_server_cert masters match max max_rows maxvalue message_text middleint migrate min min_rows minute_microsecond minute_second mod mode modifies modify mutex mysql_errno natural next no no_write_to_binlog offline offset one online open optimize option optionally out outer outfile pack_keys parser partition partitions password phase plugin plugins prepare preserve prev primary privileges procedure processlist profile profiles purge query quick range read read_write reads real rebuild recover references regexp relaylog release remove rename reorganize repair repeatable replace require resignal restrict resume return returns revoke right rlike rollback rollup row row_format rtree savepoint schedule schema schema_name schemas second_microsecond security sensitive separator serializable server session share show signal slave slow smallint snapshot soname spatial specific sql sql_big_result sql_buffer_result sql_cache sql_calc_found_rows sql_no_cache sql_small_result sqlexception sqlstate sqlwarning ssl start starting starts status std stddev stddev_pop stddev_samp storage straight_join subclass_origin sum suspend table_name table_statistics tables tablespace temporary terminated to trailing transaction trigger triggers truncate uncommitted undo uninstall unique unlock upgrade usage use use_frm user user_resources user_statistics using utc_date utc_time utc_timestamp value variables varying view views warnings when while with work write xa xor year_month zerofill begin do then else loop repeat"),
builtin:set("bool boolean bit blob decimal double enum float long longblob longtext medium mediumblob mediumint mediumtext time timestamp tinyblob tinyint tinytext text bigint int int1 int2 int3 int4 int8 integer float float4 float8 double char varbinary varchar varcharacter precision date datetime year unsigned signed numeric"),atoms:set("false true null unknown"),operatorChars:/^[*+\-%<>!=&|^]/,dateSQL:set("date time timestamp"),support:set("ODBCdotTable zerolessFloat"),hooks:{"@":hookVar,"`":hookIdentifier,
"\\":hookClient}});CodeMirror.defineMIME("text/x-esperepl",{name:"sql",client:set(""),keywords:set("module import uses after all and any as asc at avedev avg between by case cast coalesce context count create current_timestamp dataflow day days define delete desc distinct else end escape events every every-distinct exists expression false first for from full group having hour hours in interval index initiated inner insert instanceof into irstream is istream join last lastweekday left like limit match_recognize matched matches max measures median merge metadatasql millisecond milliseconds min minute minutes month months msec new not null offset on or order outer output partition pattern prev prevcount prevtail prevwindow prior regexp retain-intersection retain-union right rstream schema sec second seconds select set snapshot some sql start stddev sum terminated then true typeof unidirectional until update using variable week weekday weeks when where while window year years"),
builtin:set("boolean double float short long integer int char string bigdecimal biginteger"),atoms:set("false true null"),operatorChars:/^[*+\-%<>!=&|^]/,dateSQL:set("current_timestamp")});CodeMirror.defineMIME("text/x-esperseq",{name:"sql",client:set(""),keywords:set("day days hour hours millisecond milliseconds min minute minutes month months msec sec second seconds week weekday weeks year years"),builtin:set(""),atoms:set("false true null"),operatorChars:/^[*+\-%<>!=&|^]/,dateSQL:set("")});CodeMirror.defineMIME("text/x-plsql",
{name:"sql",client:set("appinfo arraysize autocommit autoprint autorecovery autotrace blockterminator break btitle cmdsep colsep compatibility compute concat copycommit copytypecheck define describe echo editfile embedded escape exec execute feedback flagger flush heading headsep instance linesize lno loboffset logsource long longchunksize markup native newpage numformat numwidth pagesize pause pno recsep recsepchar release repfooter repheader serveroutput shiftinout show showmode size spool sqlblanklines sqlcase sqlcode sqlcontinue sqlnumber sqlpluscompatibility sqlprefix sqlprompt sqlterminator suffix tab term termout time timing trimout trimspool ttitle underline verify version wrap"),
keywords:set("abort accept access add all alter and any array arraylen as asc assert assign at attributes audit authorization avg base_table begin between binary_integer body boolean by case cast char char_base check close cluster clusters colauth column comment commit compress connect connected constant constraint crash create current currval cursor data_base database date dba deallocate debugoff debugon decimal declare default definition delay delete desc digits dispose distinct do drop else elsif enable end entry escape exception exception_init exchange exclusive exists exit external fast fetch file for force form from function generic goto grant group having identified if immediate in increment index indexes indicator initial initrans insert interface intersect into is key level library like limited local lock log logging long loop master maxextents maxtrans member minextents minus mislabel mode modify multiset new next no noaudit nocompress nologging noparallel not nowait number_base object of off offline on online only open option or order out package parallel partition pctfree pctincrease pctused pls_integer positive positiven pragma primary prior private privileges procedure public raise range raw read rebuild record ref references refresh release rename replace resource restrict return returning reverse revoke rollback row rowid rowlabel rownum rows run savepoint schema segment select separate session set share snapshot some space split sql start statement storage subtype successful synonym tabauth table tables tablespace task terminate then to trigger truncate type union unique unlimited unrecoverable unusable update use using validate value values variable view views when whenever where while with work"),
functions:set("abs acos add_months ascii asin atan atan2 average bfilename ceil chartorowid chr concat convert cos cosh count decode deref dual dump dup_val_on_index empty error exp false floor found glb greatest hextoraw initcap instr instrb isopen last_day least lenght lenghtb ln lower lpad ltrim lub make_ref max min mod months_between new_time next_day nextval nls_charset_decl_len nls_charset_id nls_charset_name nls_initcap nls_lower nls_sort nls_upper nlssort no_data_found notfound null nvl others power rawtohex reftohex round rowcount rowidtochar rpad rtrim sign sin sinh soundex sqlcode sqlerrm sqrt stddev substr substrb sum sysdate tan tanh to_char to_date to_label to_multi_byte to_number to_single_byte translate true trunc uid upper user userenv variance vsize"),
builtin:set("bfile blob character clob dec float int integer mlslabel natural naturaln nchar nclob number numeric nvarchar2 real rowtype signtype smallint string varchar varchar2"),operatorChars:/^[*+\-%<>!=~]/,dateSQL:set("date time timestamp")})})();var HQ_ESPERHQAPP_URL="/esperhqapp/";var HQ_DIALOGDIMENSION_ENUM={DEFAULT:{width:1150,height:750},TINY:{width:400,height:250},VERYSMALL:{width:750,height:400},SMALL:{width:950,height:450},LARGE:{width:1200,height:800},INFINITE:{width:1920,height:1150},POPUP:{width:850,height:680},POPUP_NARROW:{width:800,height:300}};
var HQ_DIALOG={SHARED_ERRORALERT:{title:"Error",url:"views/shared/errorshared.html",dimension:HQ_DIALOGDIMENSION_ENUM.TINY,modal:true},SHARED_INFOALERT:{title:"Information",url:"views/shared/errorshared.html",dimension:HQ_DIALOGDIMENSION_ENUM.TINY,modal:true},SHARED_CONFIRMALERT:{title:"Confirmation",url:"views/shared/confirmshared.html",dimension:HQ_DIALOGDIMENSION_ENUM.TINY,modal:true},SHARED_STMTSELECTION:{title:"Statement Selection Criteria",url:"views/shared/statementselection.html",dimension:HQ_DIALOGDIMENSION_ENUM.SMALL,
modal:true},SHARED_INTERVAL:{title:"Interval Form",url:"views/shared/intervalentry.html",dimension:HQ_DIALOGDIMENSION_ENUM.SMALL,modal:true},SHARED_EVENTDATA:{title:"Event Data Form",url:"views/shared/eventdataentry.html",dimension:HQ_DIALOGDIMENSION_ENUM.SMALL,modal:true},SHARED_FILESAVELOAD:{title:"Files",url:"views/shared/filesaveload.html",dimension:HQ_DIALOGDIMENSION_ENUM.POPUP,modal:true},SHARED_VIEWFILEBODY:{title:"View File",url:"views/shared/viewfilebodyshared.html",dimension:HQ_DIALOGDIMENSION_ENUM.LARGE,
modal:true},SHARED_LOGIN:{title:"Login",url:"views/shared/login.html",dimension:HQ_DIALOGDIMENSION_ENUM.VERYSMALL,modal:true},SEQUENCEEXECCREATE:{title:"Create Sequence",url:"views/mgmt/sequenceexeccreate.html"},SEQUENCEEXECBROWSE:{title:"Browse Sequences",url:"views/mgmt/sequenceexecbrowse.html"},STMTBROWSE:{title:"Browse Statements",url:"views/mgmt/statementbrowse.html"},STMTMEMORYBROWSE:{title:"Browse Statement Detailed Metrics",url:"views/mgmt/statementmemorybrowse.html"},DEPLOYBROWSE:{title:"Browse Deployments",
url:"views/mgmt/deploymentbrowse.html"},MAPFLOWS:{title:"Browse Map Of Streams",url:"views/mgmt/mapflows.html"},STMTCREATE:{title:"Create Statement",url:"views/mgmt/statementcreate.html"},DEPLOYCREATE:{title:"Create Deployment",url:"views/mgmt/deploymentcreate.html"},EVENTTYPEBROWSE:{title:"Browse Event Types",url:"views/mgmt/eventtypebrowse.html"},EVENTTYPEDETAIL:{title:"Event Type Detail",url:"views/mgmt/eventtypedetail.html"},NAMEDWINDOWBROWSE:{title:"Named Windows/Tables",url:"views/mgmt/namedwindowbrowse.html"},
ONDEMANDQUERY:{title:"On-Demand Query",url:"views/mgmt/ondemandquery.html"},VARIABLEBROWSE:{title:"Browse Variables",url:"views/mgmt/variablebrowse.html"},DATAFLOWBROWSE:{title:"Browse Dataflows",url:"views/mgmt/dataflowbrowse.html"},DATAFLOWINSTANCEBROWSE:{title:"Browse Dataflow Instances",url:"views/mgmt/dataflowinstancebrowse.html"},SCENARIORUNDIALOG:{title:"Create Scenario",url:"views/mgmt/scenariorundialog.html",dimension:HQ_DIALOGDIMENSION_ENUM.LARGE},STATEMENTDETAIL:{title:"Statement Detail",
url:"views/mgmt/statementdetail.html"},STATEMENTITERATE:{title:"Statement Iterate",url:"views/mgmt/statementiterate.html"},DEPLOYMENTDETAIL:{title:"Deployment Detail",url:"views/mgmt/deploymentdetail.html"},SEQUENCEEXECDETAIL:{title:"Sequence Detail",url:"views/mgmt/sequenceexecdetail.html"},DATAFLOWDETAIL:{title:"Dataflow Declaration Detail",url:"views/mgmt/dataflowdetail.html"},DATAFLOWINSTANCEDETAIL:{title:"Dataflow Instance Detail",url:"views/mgmt/dataflowinstancedetail.html"},DEBUGGER:{title:"Debugger",
url:"views/mgmt/debugger.html",dimension:HQ_DIALOGDIMENSION_ENUM.LARGE},DEBUGGERENTRYPOINT:{title:"Debug Entry Point",url:"views/mgmt/debuggerentrypoint.html"},CONSUMERBROWSE:{title:"View Browser",url:"views/push/consumerbrowse.html"},WEBLAYERBROWSE:{title:"View Web Layer",url:"views/push/weblayerbrowse.html"},PUSHENDPOINTBROWSE:{title:"View Endpoint",url:"views/push/pushendpointbrowse.html"},EVENTLETWIZARD:{title:"Eventlet Wizard",url:"views/push/eventletwizard.html",dimension:HQ_DIALOGDIMENSION_ENUM.LARGE},
EVENTLETWIZARDCONFIGURE:{title:"Instructions For Resource",url:"views/push/eventletwizard_resourceselect_configure.html"},EVENTLETWIZARDSETTINGS:{title:"Eventlet General Settings",url:"views/push/eventletwizard_settings.html",dimension:HQ_DIALOGDIMENSION_ENUM.SMALL,modal:true},PAGEBUILDER:{title:"Dashboard Page Builder",url:"views/push/pagebuilder.html"},EVENTLET:{title:undefined,url:undefined},EVENTLET_ABOUT:{title:"Eventlet About",url:"views/eventlet/eventletabout.html"},EVENTLET_RETAIN_SETTINGS:{title:"Eventlet Retain Settings",
url:"views/eventlet/eventletsettings.html"},EVENTLET_TIMELINE_SETTINGS:{title:"Timeline Settings",url:"views/eventlet/eventlet_timeline_settings.html"},EVENTLET_TIMELINE_EVENTDETAIL:{title:"Timeline Event Detail",url:"views/eventlet/eventlet_timeline_eventdetail.html"},EVENTLET_MENU_SHARED:{title:"Eventlet Menu Shared",url:"views/shared/eventletmenushared.html"},HARNESS_DIALOG:{title:"Harness Dialog",url:"views/harness/harnessdialog.html"}};
var HQ_CODEMIRROR_CONFIG={mode:"text/x-esperepl",theme:"neat",indentWithTabs:true,smartIndent:true,lineNumbers:true,matchBrackets:true,autofocus:true,gutters:["CodeMirror-linenumbers","editor-validations"],viewportMargin:Infinity};
var HQ_EVENTLET_TYPE={CHART:{title:"Chart",url:"views/eventlet/eventlet_chart.html",description:"Displays a chart, such as line, bar, area or pie chart.",configurl:"views/push/eventletwizard_config_chart.html",classname:"HQEventletChart"},GRID:{title:"Grid",url:"views/eventlet/eventlet_grid.html",description:"Displays a nestable grid or table.",configurl:"views/push/eventletwizard_config_grid.html",classname:"HQEventletGrid"},TIMELINE:{title:"Timeline",url:"views/eventlet/eventlet_timeline.html",
description:"Displays a horizonal time-based sliding timeline of events.",configurl:"views/push/eventletwizard_config_timeline.html",classname:"HQEventletTimeline"},GAUGE:{title:"Gauge",url:"views/eventlet/eventlet_gauge.html",description:"Displays a gauge.",configurl:"views/push/eventletwizard_config_gauge.html",classname:"HQEventletGauge"},PLUGIN:{title:"Plugin",url:"views/eventlet/eventlet_plugin.html",description:"Visualization provided by an external application component.",configurl:"views/push/eventletwizard_config_plugin.html",
classname:null}};var HQ_ENGINEMETRICS_TYPE={ENGINE:{title:"Engine Metrics",code:"ENGINEMETRICS",description:"Key engine metrics including total count of incoming and routed events, current time, schedule depth etc."},FILTER:{title:"Filter Metrics",code:"FILTERMETRICS",description:"Count of incoming event per event type."},STMTOUTPUT:{title:"Statement Output Metrics",code:"STMTOUTPUTMETRICS",description:"Count of output events delivered per statement."}};
var HQ_EVENTTARGET_TYPE={BROWSER_CLOSED:{name:"browserClosed"},DIALOG_CLOSED:{name:"dialogClosed"},CLEAR:{name:"clear"},EVENTLET_CLOSED:{name:"eventletClosed"},SUSPEND_DISCARD:{name:"suspendDiscard"},SUSPEND_BUFFER:{name:"suspendBuffer"},RESUME:{name:"resume"},ABOUT:{name:"about"},RETAINSETTINGS:{name:"retainsettings"},EVENTLETSETTINGS:{name:"eventletsettings"},TRACE:{name:"trace"},ERROR:{name:"error"},MESSAGES:{name:"messages"},STATS:{name:"stats"},TESTDATA:{name:"testdata"},PLAYBACKMESSAGE:{name:"playbackMessage"},
NEXTTESTCASE:{name:"nextTestCase"},PAUSEPLAYBACK:{name:"pausePlayback"},CONTINUEPLAYBACK:{name:"continuePlayback"},APPLY_RETAIN:{name:"applyRetain"},APPLY_TIMELINE:{name:"applyTimeline"},EVENTLETWIZARDCONFIG:{name:"readyWizardConfig"},EVENTLETWIZARDRESOURCES:{name:"readyWizardResourceInfo"},EVENTLETWIZARDCOMPOSITION:{name:"readyWizardComposition"},FILESAVED:{name:"fileSaved"},INDEXENVUPDATE:{name:"indexanvupdate"},CONFIGLOADED:{name:"configloaded"},REFRESHMEMORY:{name:"refreshmemory"}};
var HQ_RETAIN_TYPE={EVENTS:{name:"Events",unit:"events"},SECONDS:{name:"Seconds",unit:"seconds"},MINUTES:{name:"Minutes",unit:"minutes"},HOURS:{name:"Hours",unit:"hours"}};var HQ_FILETYPE={EVENTLET:{name:"Eventlet",extension:"eventlet"},HTML:{name:"HTML",extension:"html"},MODULE:{name:"Module",extension:"epl"},SEQUENCE:{name:"Sequence",extension:"seq"},TRACE:{name:"Trace",extension:"espertrace"},ALL:{name:"All Files (*.*)",extension:null}};var HQ_FILEDIALOGOPTYPE={LOAD:"load",SAVE:"save",SELECT:"select"};
var HQ_GRIDNESTINGTYPE={COLUMN:{name:"Column",code:"col"},ROW:{name:"Row",code:"row"},TAB:{name:"Tabbed",code:"tab"}};var HQ_GRIDINNERMOSTTYPE={APPENDTOP:{name:"Add New Rows To Top",code:"appendtop"},LASTVALUE:{name:"Show The Last Received Row(s) Only",code:"lastvalue"},APPENDEND:{name:"Add New Rows To Bottom",code:"appendend"}};var HQ_CHARTBASETYPE={COLUMN:{name:"Column",code:"column"},LINE:{name:"Line",code:"line"},PIE:{name:"Pie",code:"pie"},AREA:{name:"Area",code:"area"}};
var HQ_CHARTLEGENDPLACETYPE={NW:{name:"North-West",code:"nw"},NE:{name:"North-East",code:"ne"},SW:{name:"South-West",code:"sw"},SE:{name:"South-East",code:"se"}};var HQ_CHARTAXISTYPE={LINEAR:{name:"Linear",code:"linear"},DATETIME:{name:"Datetime",code:"datetime"},CATEGORY:{name:"Category",code:"category"}};var HQ_CHARTXAXISPLACEMENTTYPE={TOP:{name:"Top",code:"top"},BOTTOM:{name:"Bottom",code:"bottom"}};var HQ_CHARTYAXISPLACEMENTTYPE={LEFT:{name:"Left",code:"left"},RIGHT:{name:"Right",code:"right"}};
var HQ_CHARTMARKERTYPE={SQUARE:{name:"Square",code:"square"},DIAMOND:{name:"Diamond",code:"diamond"},TRIANGLE:{name:"Triangle",code:"triangle"},CROSS:{name:"Cross",code:"cross"},NONE:{name:"None",code:"none"}};var HQ_LAUNCHPARAMTYPE={EVENTLETXML:"eventlet_xml",EVENTLETFILENAME:"eventlet_filename",EVENTLETURL:"eventlet_url"};var HQ_PAGEBUILDERFROMTYPE={FILENAME:{label:"Filename",enter:"File"},URL:{label:"External URL",enter:"Url"},XMLDOC:{label:"XML Document",enter:"Xml"}};
var HQ_TIMELINE_DISPLAY_TYPE={TINY:{name:"Tiny",detail:"tiny",height:30,width:55},SMALL:{name:"Small",detail:"small",height:45,width:80},FULL:{name:"Full",detail:"full",height:150,width:200}};var HQ_BUILTIN_PROPERTIES_TYPE={EVENTARRIVALTIME:{name:"Event arrival time (builtin)",code:"{ARRIVALTIME}"},EVENTARRIVALTIMEUTC:{name:"Event arrival time UTC (builtin)",code:"{ARRIVALTIMEUTC}"}};var HQ_PARAMETER_TYPES={STRING:{name:"String"},DOUBLE:{name:"Double"},INTEGER:{name:"Integer"}};function AngularInit(){}
AngularInit.init=function(module){module.directive("hqeventletmenu",function(){return{templateUrl:HQUriUtil.getUrlViews(HQ_DIALOG.EVENTLET_MENU_SHARED.url),link:function(scope,element,attrs){var menu=$(element).find("ul.eventlet_menu");menu.menu({position:{my:"left",at:"left-80 bottom+90"}})}}});module.directive("hqfocus",function(){return function(scope,element){setfocus=function(){element[0].focus()};setTimeout(setfocus,1)}});module.service("restService",function($http){var local=false;var getCustomConfig=
function(timeout,httpCall){httpCall["timeout"]=timeout;return httpCall};var getDefaultReadConfig=function(httpCall){httpCall["timeout"]=5E3;return httpCall};var getDefaultWriteConfig=function(httpCall){httpCall["timeout"]=1E4;return httpCall};var handleError=function(data,status){if(status==0){console.log("Not connected");return}var $div=$("\x3cdiv ng-app\x3d'myModule'/\x3e");var url=HQUriUtil.addUUIDToUrl(HQUriUtil.getUrlViews(HQ_DIALOG.SHARED_ERRORALERT.url));$div.load(url,function(response,status,
xhr){if(!HQJqueryUtil.checkHandleLoadStatus(url,response,status,xhr))return;angular.bootstrap($div,["myModule"]);var settings={modal:false,title:HQ_DIALOG.SHARED_ERRORALERT.title,width:HQ_DIALOG.SHARED_ERRORALERT.dimension.width,height:HQ_DIALOG.SHARED_ERRORALERT.dimension.height};var dialog=$div.dialog(settings);var closeButtonCallback=function(){dialog.dialog("close")};angular.element($div.children(":first")).scope().doInitialize({close:closeButtonCallback,config:{data:data,type:"error"}})})};this.fetchConfiguration=
function(cbFetched){if(!local)$http(getCustomConfig(6E4,{url:HQUriUtil.getUrlHQServices("configuration"),method:"GET"})).success(function(response){cbFetched(response)}).error(function(data,status,headers,config){handleError(data,status,headers,config)});else{var response={endpoints:[{isDefault:true,engines:[{"engineURI":"A"},{"engineURI":"B"}]}]};function cb(){cbFetched(response)}setTimeout(cb,0)}};this.rememberMe=function(cbFetched){if(!local)$http(getDefaultReadConfig({url:HQUriUtil.getUrlHQServices("login/rememberme"),
method:"GET"})).success(function(response){cbFetched(response)}).error(function(data,status,headers,config){handleError(data,status,headers,config)});else;};this.authenticate=function(authentication,cbFailed,cbSuccess){if(!local){var url=HQUriUtil.getUrlHQServices("login/authenticate");$http(getDefaultWriteConfig({url:url,method:"POST",data:JSON.stringify(authentication)})).success(function(response){cbSuccess(response)}).error(function(data,status,headers,config){if(status==404)cbFailed();else handleError(data,
status,headers,config)})}else;};this.logout=function(){if(!local){var url=HQUriUtil.getUrlHQServices("login/logout");$http(getDefaultWriteConfig({url:url,method:"POST",data:JSON.stringify("{}")})).success(function(response){}).error(function(data,status,headers,config){handleError(data,status,headers,config)})}else;};this.fetchStatements=function(endpointName,engineURI,selectionExpr,all,soda,cbFetched){if(!local){var url=HQUriUtil.getUrlHQServices("endpoint/"+encodeURIComponent(endpointName)+"/engine/"+
encodeURIComponent(engineURI)+"/statement");if(!all&&selectionExpr!=null&&selectionExpr.trim()!=="")url=HQUriUtil.addParameter(url,"filter",encodeURIComponent(selectionExpr),0);if(soda)url=HQUriUtil.addParameter(url,"soda","true",0);$http(getDefaultReadConfig({url:url,method:"GET"})).success(function(response){cbFetched(response)}).error(function(data,status,headers,config){handleError(data,status,headers,config)})}else{function cb(){cbFetched({statements:[{"statementName":"ABC","epl":"epl1"},{"statementName":"DEF",
"epl":"epl2"}]})}setTimeout(cb,0)}};this.createStatement=function(endpointName,engineURI,statementObject,cbCreated,cbError){var url=HQUriUtil.getUrlHQServices("endpoint/"+encodeURIComponent(endpointName)+"/engine/"+encodeURIComponent(engineURI)+"/statement");$http(getDefaultWriteConfig({url:url,method:"POST",data:JSON.stringify(statementObject)})).success(function(response){cbCreated(response)}).error(function(data,status,headers,config){if(status==400)cbError(data.details);else handleError(data,
status,headers,config)})};this.getDebugDetail=function(traceFileName,cbFetched){var url=HQUriUtil.getUrlHQServices("debug");url=HQUriUtil.addParameter(url,"filename",traceFileName);$http(getCustomConfig(12E4,{url:url,method:"GET"})).success(function(response){cbFetched(response)}).error(function(data,status,headers,config){handleError(data,status,headers,config)})};this.getDebugEntryPoint=function(traceFileName,positionId,cbFetched){var url=HQUriUtil.getUrlHQServices("debug/entrypoint");url=HQUriUtil.addParameter(url,
"filename",traceFileName);url=HQUriUtil.addParameter(url,"positionid",positionId);$http(getCustomConfig(6E4,{url:url,method:"GET"})).success(function(response){cbFetched(response)}).error(function(data,status,headers,config){handleError(data,status,headers,config)})};this.fetchStmtDetail=function(endpointName,engineURI,statementName,cbFetched,cbError){if(!local){var url=HQUriUtil.getUrlHQServices("endpoint/"+encodeURIComponent(endpointName)+"/engine/"+encodeURIComponent(engineURI)+"/statement/"+encodeURIComponent(statementName));
$http(getDefaultReadConfig({url:url,method:"GET"})).success(function(response){cbFetched(response)}).error(function(data,status,headers,config){if(cbError!=null)cbError(data,status);handleError(data,status,headers,config)})}else{function cb(){cbFetched({"statementName":"A","epl":"select * from A","properties":[]})}setTimeout(cb,0)}};this.createAssertClient=function(client,cbCreated){if(!local){var url=HQUriUtil.getUrlHQServices("client");$http(getDefaultWriteConfig({url:url,method:"POST",async:false,
data:JSON.stringify(client)})).success(function(response){cbCreated(response)}).error(function(data,status,headers,config){handleError(data,status,headers,config)})}else{function cb(){cbCreated({"todo":"todo"})}setTimeout(cb,0)}};this.deleteClient=function(clientId){if(!local){var url=HQUriUtil.getUrlHQServices("client/"+encodeURIComponent(clientId));$http(getDefaultWriteConfig({url:url,method:"DELETE"})).success(function(response){}).error(function(data,status,headers,config){handleError(data,status,
headers,config)})}else{function cb(){cbDeleted()}setTimeout(cb,0)}};this.createActivation=function(clientId,activation,cbCreated){if(!local){var url=HQUriUtil.getUrlHQServices("client/"+encodeURIComponent(clientId)+"/activation");$http(getDefaultWriteConfig({url:url,method:"POST",data:JSON.stringify(activation)})).success(function(response){cbCreated(response)}).error(function(data,status,headers,config){handleError(data,status,headers,config)})}else{function cb(){cbCreated({"todo":"todo"})}setTimeout(cb,
0)}};this.updateActivation=function(clientId,activationId,request,cbUpdated){if(!local){var url=HQUriUtil.getUrlHQServices("client/"+encodeURIComponent(clientId)+"/activation/"+encodeURIComponent(activationId));$http(getDefaultWriteConfig({url:url,method:"PUT",data:JSON.stringify(request)})).success(function(response){cbUpdated(response)}).error(function(data,status,headers,config){if(status==404)console.log("Update activation returned client-not-known");else handleError(data,status,headers,config)})}else{function cb(){cbUpdated({"todo":"todo"})}
setTimeout(cb,0)}};this.fetchDeployments=function(endpointName,engineURI,cbFetched){if(!local){var url=HQUriUtil.getUrlHQServices("endpoint/"+encodeURIComponent(endpointName)+"/engine/"+encodeURIComponent(engineURI)+"/deployment");$http(getDefaultReadConfig({url:url,method:"GET"})).success(function(response){cbFetched(response)}).error(function(data,status,headers,config){handleError(data,status,headers,config)})}else{function cb(){cbFetched([{"deploymentId":"ABC","state":"DEPLOYED"},{"deploymentId":"DEF",
"state":"DEPLOYED"}])}setTimeout(cb,0)}};this.fetchEventTypes=function(endpointName,engineURI,names,cbFetched){if(!local){var url=HQUriUtil.getUrlHQServices("endpoint/"+encodeURIComponent(endpointName)+"/engine/"+encodeURIComponent(engineURI)+"/eventtype");if(names!=null)url=HQUriUtil.addParameter(url,"names",encodeURIComponent(names),0);$http(getDefaultReadConfig({url:url,method:"GET"})).success(function(response){cbFetched(response)}).error(function(data,status,headers,config){handleError(data,
status,headers,config)})}else{function cb(){cbFetched([{"eventTypeName":"ABC"}])}setTimeout(cb,0)}};this.fetchNamedWindows=function(endpointName,engineURI,cbFetched){if(!local){var url=HQUriUtil.getUrlHQServices("endpoint/"+encodeURIComponent(endpointName)+"/engine/"+encodeURIComponent(engineURI)+"/namedwindow");$http(getDefaultReadConfig({url:url,method:"GET"})).success(function(response){cbFetched(response)}).error(function(data,status,headers,config){handleError(data,status,headers,config)})}else{function cb(){cbFetched([{"namedWindowName":"ABC"}])}
setTimeout(cb,0)}};this.fetchSequenceExecutions=function(endpointName,engineURI,cbFetched){if(!local){var url=HQUriUtil.getUrlHQServices("endpoint/"+encodeURIComponent(endpointName)+"/engine/"+encodeURIComponent(engineURI)+"/sequenceexecution");$http(getDefaultReadConfig({url:url,method:"GET"})).success(function(response){cbFetched(response)}).error(function(data,status,headers,config){handleError(data,status,headers,config)})}else{function cb(){cbFetched([{"sequenceExecutionName":"ABC"}])}setTimeout(cb,
0)}};this.fetchDataflows=function(endpointName,engineURI,cbFetched){if(!local){var url=HQUriUtil.getUrlHQServices("endpoint/"+encodeURIComponent(endpointName)+"/engine/"+encodeURIComponent(engineURI)+"/dataflow");$http(getDefaultReadConfig({url:url,method:"GET"})).success(function(response){cbFetched(response)}).error(function(data,status,headers,config){handleError(data,status,headers,config)})}else{function cb(){cbFetched([{"dataflowName":"ABC"}])}setTimeout(cb,0)}};this.fetchDataflowInstances=
function(endpointName,engineURI,cbFetched){if(!local){var url=HQUriUtil.getUrlHQServices("endpoint/"+encodeURIComponent(endpointName)+"/engine/"+encodeURIComponent(engineURI)+"/dataflowinstance");$http(getDefaultReadConfig({url:url,method:"GET"})).success(function(response){cbFetched(response)}).error(function(data,status,headers,config){handleError(data,status,headers,config)})}else{function cb(){cbFetched([{"dataflowInstanceId":"ABC"}])}setTimeout(cb,0)}};this.deleteSequenceExecution=function(endpointName,
engineURI,sequenceExecutionName,cbDeleted){if(!local){var url=HQUriUtil.getUrlHQServices("endpoint/"+encodeURIComponent(endpointName)+"/engine/"+encodeURIComponent(engineURI)+"/sequenceexecution/"+encodeURIComponent(sequenceExecutionName));$http(getDefaultWriteConfig({url:url,method:"DELETE"})).success(function(response){cbDeleted()}).error(function(data,status,headers,config){handleError(data,status,headers,config)})}else{function cb(){cbDeleted()}setTimeout(cb,0)}};this.deleteDataflowInstance=function(endpointName,
engineURI,dataflowInstanceName,cbDeleted){if(!local){var url=HQUriUtil.getUrlHQServices("endpoint/"+encodeURIComponent(endpointName)+"/engine/"+encodeURIComponent(engineURI)+"/dataflowinstance/"+encodeURIComponent(dataflowInstanceName));$http(getDefaultWriteConfig({url:url,method:"DELETE"})).success(function(response){cbDeleted()}).error(function(data,status,headers,config){handleError(data,status,headers,config)})}else{function cb(){cbDeleted()}setTimeout(cb,0)}};this.fetchDeploymentDetail=function(endpointName,
engineURI,deploymentId,cbFetched){if(!local){var url=HQUriUtil.getUrlHQServices("endpoint/"+encodeURIComponent(endpointName)+"/engine/"+encodeURIComponent(engineURI)+"/deployment/"+encodeURIComponent(deploymentId));$http(getDefaultReadConfig({url:url,method:"GET"})).success(function(response){cbFetched(response)}).error(function(data,status,headers,config){handleError(data,status,headers,config)})}else{function cb(){cbFetched({deploymentId:"ABC",state:"DEPLOYED",addedDate:"1-1-1"})}setTimeout(cb,
0)}};this.fetchSequenceExecutionDetail=function(endpointName,engineURI,sequenceExecutionName,cbFetched){if(!local){var url=HQUriUtil.getUrlHQServices("endpoint/"+encodeURIComponent(endpointName)+"/engine/"+encodeURIComponent(engineURI)+"/sequenceexecution/"+encodeURIComponent(sequenceExecutionName));$http(getDefaultReadConfig({url:url,method:"GET"})).success(function(response){cbFetched(response)}).error(function(data,status,headers,config){handleError(data,status,headers,config)})}else{function cb(){cbFetched({sequenceExecutionName:"ABC",
state:"STARTED"})}setTimeout(cb,0)}};this.fetchDataflowDetail=function(endpointName,engineURI,dataflowName,cbFetched){if(!local){var url=HQUriUtil.getUrlHQServices("endpoint/"+encodeURIComponent(endpointName)+"/engine/"+encodeURIComponent(engineURI)+"/dataflow/"+encodeURIComponent(dataflowName));$http(getDefaultReadConfig({url:url,method:"GET"})).success(function(response){cbFetched(response)}).error(function(data,status,headers,config){handleError(data,status,headers,config)})}else{function cb(){cbFetched({dataflowName:"ABC",
epl:"someepl"})}setTimeout(cb,0)}};this.fetchDataflowInstanceDetail=function(endpointName,engineURI,dataflowInstanceName,cbFetched){if(!local){var url=HQUriUtil.getUrlHQServices("endpoint/"+encodeURIComponent(endpointName)+"/engine/"+encodeURIComponent(engineURI)+"/dataflowinstance/"+encodeURIComponent(dataflowInstanceName));$http(getDefaultReadConfig({url:url,method:"GET"})).success(function(response){cbFetched(response)}).error(function(data,status,headers,config){handleError(data,status,headers,
config)})}else{function cb(){cbFetched({dataflowInstanceName:"ABC"})}setTimeout(cb,0)}};this.iterateStatement=function(endpointName,engineURI,statementName,maxRows,cbFetched){if(!local){var url=HQUriUtil.getUrlHQServices("endpoint/"+encodeURIComponent(endpointName)+"/engine/"+encodeURIComponent(engineURI)+"/statement/"+encodeURIComponent(statementName)+"/iterate");if(maxRows!=null)url=HQUriUtil.addParameter(url,"maxrows",encodeURIComponent(maxRows),0);$http(getDefaultReadConfig({url:url,method:"GET"})).success(function(response){cbFetched(response)}).error(function(data,
status,headers,config){handleError(data,status,headers,config)})}else{function cb(){cbFetched({dataflowInstanceName:"ABC"})}setTimeout(cb,0)}};this.updateSequenceExecution=function(endpointName,engineURI,sequenceExecution,cbUpdated){if(!local){var url=HQUriUtil.getUrlHQServices("endpoint/"+encodeURIComponent(endpointName)+"/engine/"+encodeURIComponent(engineURI)+"/sequenceexecution/"+encodeURIComponent(sequenceExecution.sequenceExecutionName));$http(getDefaultWriteConfig({url:url,method:"PUT",data:JSON.stringify(sequenceExecution)})).success(function(response){cbUpdated(response)}).error(function(data,
status,headers,config){handleError(data,status,headers,config)})}else{function cb(){cbUpdated({"todo":"todo"})}setTimeout(cb,0)}};this.updateDataflowInstance=function(endpointName,engineURI,dataflowInstanceName,dataflowInstance,cbUpdated){if(!local){var url=HQUriUtil.getUrlHQServices("endpoint/"+encodeURIComponent(endpointName)+"/engine/"+encodeURIComponent(engineURI)+"/dataflowinstance/"+encodeURIComponent(dataflowInstanceName));$http(getDefaultWriteConfig({url:url,method:"PUT",data:JSON.stringify(dataflowInstance)})).success(function(response){cbUpdated(response)}).error(function(data,
status,headers,config){handleError(data,status,headers,config)})}else{function cb(){cbUpdated({"todo":"todo"})}setTimeout(cb,0)}};this.updateVariable=function(endpointName,engineURI,variableName,variable,cbUpdated){if(!local){var url=HQUriUtil.getUrlHQServices("endpoint/"+encodeURIComponent(endpointName)+"/engine/"+encodeURIComponent(engineURI)+"/variable/"+encodeURIComponent(variableName));$http(getDefaultWriteConfig({url:url,method:"PUT",data:JSON.stringify(variable)})).success(function(response){cbUpdated(response)}).error(function(data,
status,headers,config){handleError(data,status,headers,config)})}else{function cb(){cbUpdated({"todo":"todo"})}setTimeout(cb,0)}};this.executeScenarioRun=function(endpointName,engineURI,scenario,debug,scenarioName,cbDone,cbError){if(!local){var url=HQUriUtil.getUrlHQServices("endpoint/"+encodeURIComponent(endpointName)+"/engine/"+encodeURIComponent(engineURI)+"/scenariorun");if(debug){url=HQUriUtil.addParameter(url,"debug",true);url=HQUriUtil.addParameter(url,"debugscenarioname",scenarioName)}$http(getCustomConfig(2E4,
{url:url,method:"POST",data:JSON.stringify(scenario)})).success(function(response){cbDone(response)}).error(function(data,status,headers,config){if(status==400)cbError(data.details);else handleError(data,status,headers,config)})}else{function cb(){cbUpdated({"todo":"todo"})}setTimeout(cb,0)}};this.fetchEventTypeDetail=function(endpointName,engineURI,eventTypeName,cbFetched){if(!local){var url=HQUriUtil.getUrlHQServices("endpoint/"+encodeURIComponent(endpointName)+"/engine/"+encodeURIComponent(engineURI)+
"/eventtype/"+encodeURIComponent(eventTypeName));$http(getDefaultReadConfig({url:url,method:"GET"})).success(function(response){cbFetched(response)}).error(function(data,status,headers,config){handleError(data,status,headers,config)})}else{function cb(){cbFetched({eventTypeName:"ABC"})}setTimeout(cb,0)}};this.fetchModuleTemplates=function(cbFetched){if(!local){var url=HQUriUtil.getUrlHQServices("moduletemplate");$http(getDefaultReadConfig({url:url,method:"GET"})).success(function(response){cbFetched(response)}).error(function(data,
status,headers,config){handleError(data,status,headers,config)})}else{function cb(){cbFetched({name:"T1",summary:"some template",text:"some text"})}setTimeout(cb,0)}};this.validateDeployment=function(endpointName,engineURI,deployment,cbDone,cbError){if(!local){var url=HQUriUtil.getUrlHQServices("endpoint/"+encodeURIComponent(endpointName)+"/engine/"+encodeURIComponent(engineURI)+"/deploymentvalidation");$http(getDefaultReadConfig({url:url,method:"POST",data:JSON.stringify(deployment)})).success(function(response){cbDone(response)}).error(function(data,
status,headers,config){if(status==400)cbError(data.details);else handleError(data,status,headers,config)})}else{function cb(){cbDone({"todo":"todo"})}setTimeout(cb,0)}};this.validateStatement=function(endpointName,engineURI,statement,cbDone,cbError){if(!local){var url=HQUriUtil.getUrlHQServices("endpoint/"+encodeURIComponent(endpointName)+"/engine/"+encodeURIComponent(engineURI)+"/statementvalidation");$http(getDefaultReadConfig({url:url,method:"POST",data:JSON.stringify(statement)})).success(function(response){cbDone(response)}).error(function(data,
status,headers,config){if(status==400)cbError(data.details);else handleError(data,status,headers,config)})}else{function cb(){cbDone()}setTimeout(cb,0)}};this.validateSequence=function(endpointName,engineURI,sequence,cbDone,cbError){if(!local){var url=HQUriUtil.getUrlHQServices("endpoint/"+encodeURIComponent(endpointName)+"/engine/"+encodeURIComponent(engineURI)+"/sequencevalidation");$http(getDefaultReadConfig({url:url,method:"POST",data:JSON.stringify(sequence)})).success(function(response){cbDone(response)}).error(function(data,
status,headers,config){if(status==400)cbError(data["details"]);else handleError(data,status,headers,config)})}else{function cb(){cbDone({"todo":"todo"})}setTimeout(cb,0)}};this.createDeployment=function(endpointName,engineURI,undeployExisting,deployment,cbDone,cbError){if(!local){var url=HQUriUtil.getUrlHQServices("endpoint/"+encodeURIComponent(endpointName)+"/engine/"+encodeURIComponent(engineURI)+"/deployment");if(undeployExisting)url=HQUriUtil.addParameter(url,"undeployexisting","true",0);$http(getDefaultWriteConfig({url:url,
method:"POST",data:JSON.stringify(deployment)})).success(function(response){cbDone(response)}).error(function(data,status,headers,config){if(status==400&&data.details!=null&&data.details.length>0&&data.details[0].fieldName=="text")cbError(data.details);else handleError(data,status,headers,config)})}else{function cb(){cbDone({"todo":"todo"})}setTimeout(cb,0)}};this.fetchStatementsSODA=function(endpointName,engineURI,cbFetched){if(!local){var url=HQUriUtil.getUrlHQServices("endpoint/"+encodeURIComponent(endpointName)+
"/engine/"+encodeURIComponent(engineURI)+"/statementsoda");$http(getDefaultReadConfig({url:url,method:"GET"})).success(function(response){cbFetched(response)}).error(function(data,status,headers,config){handleError(data,status,headers,config)})}else{function cb(){cbFetched({todo:"todo"})}setTimeout(cb,0)}};this.fetchEngine=function(endpointName,engineURI,cbFetched){if(!local){var url=HQUriUtil.getUrlHQServices("endpoint/"+encodeURIComponent(endpointName)+"/engine/"+encodeURIComponent(engineURI));
$http(getDefaultReadConfig({url:url,method:"GET"})).success(function(response){cbFetched(response)}).error(function(data,status,headers,config){handleError(data,status,headers,config)})}else{function cb(){cbFetched({engineURI:"default",namedWindows:["Window1","Window2"]})}setTimeout(cb,0)}};this.fetchEngineStmtMetric=function(endpointName,engineURI,request,cbFetched){var url=HQUriUtil.getUrlHQServices("endpoint/"+encodeURIComponent(endpointName)+"/engine/"+encodeURIComponent(engineURI)+"/metric");
$http(getDefaultWriteConfig({url:url,method:"POST",data:JSON.stringify(request)})).success(function(response){cbFetched(response)}).error(function(data,status,headers,config){handleError(data,status,headers,config)})};this.onDemandQuery=function(endpointName,engineURI,query,cbDone,cbError){if(!local){var url=HQUriUtil.getUrlHQServices("endpoint/"+encodeURIComponent(endpointName)+"/engine/"+encodeURIComponent(engineURI)+"/ondemandquery");$http(getDefaultReadConfig({url:url,method:"POST",data:JSON.stringify(query)})).success(function(response){cbDone(response)}).error(function(data,
status,headers,config){if(status==400)cbError(data.details);else handleError(data,status,headers,config)})}else{function cb(){cbDone({"todo":"todo"})}setTimeout(cb,0)}};this.createSequenceExecution=function(endpointName,engineURI,sequenceExecution,cbCreated,cbError){var url=HQUriUtil.getUrlHQServices("endpoint/"+encodeURIComponent(endpointName)+"/engine/"+encodeURIComponent(engineURI)+"/sequenceexecution");$http(getDefaultWriteConfig({url:url,method:"POST",data:JSON.stringify(sequenceExecution)})).success(function(response){cbCreated(response)}).error(function(data,
status,headers,config){if(status==400&&data.details!=null&&data.details.length>0&&data.details[0].fieldName=="sequence")cbError(data.details);else handleError(data,status,headers,config)})};this.createDataflowInstance=function(endpointName,engineURI,dataflowInstance,cbCreated){var url=HQUriUtil.getUrlHQServices("endpoint/"+encodeURIComponent(endpointName)+"/engine/"+encodeURIComponent(engineURI)+"/dataflowinstance");$http(getDefaultWriteConfig({url:url,method:"POST",data:JSON.stringify(dataflowInstance)})).success(function(response){cbCreated(response)}).error(function(data,
status,headers,config){handleError(data,status,headers,config)})};this.fetchVariables=function(endpointName,engineURI,cbFetched){if(!local){var url=HQUriUtil.getUrlHQServices("endpoint/"+encodeURIComponent(endpointName)+"/engine/"+encodeURIComponent(engineURI)+"/variable");$http(getDefaultReadConfig({url:url,method:"GET"})).success(function(response){cbFetched(response)}).error(function(data,status,headers,config){handleError(data,status,headers,config)})}else{function cb(){cbFetched({variables:[{"variableName":"ABC"}]})}
setTimeout(cb,0)}};this.fetchPushinfoClient=function(cbFetched){if(!local){var url=HQUriUtil.getUrlHQServices("pushinfo/client");$http(getDefaultReadConfig({url:url,method:"GET"})).success(function(response){cbFetched(response)}).error(function(data,status,headers,config){handleError(data,status,headers,config)})}else{function cb(){cbFetched({})}setTimeout(cb,0)}};this.fetchPushinfoEndpoint=function(endpointName,cbFetched){if(!local){var url=HQUriUtil.getUrlHQServices("pushinfo/endpoint/"+endpointName);
$http(getDefaultReadConfig({url:url,method:"GET"})).success(function(response){cbFetched(response)}).error(function(data,status,headers,config){handleError(data,status,headers,config)})}else{function cb(){cbFetched({})}setTimeout(cb,0)}};this.fetchVFSItem=function(folderName,cbFetched){if(!local){var url=HQUriUtil.getUrlHQServices("vfs/file");if(folderName!=null)url+="/"+folderName;$http(getDefaultReadConfig({url:url,method:"GET"})).success(function(response){cbFetched(response)}).error(function(data,
status,headers,config){handleError(data,status,headers,config)})}else{function cb(){cbFetched({})}setTimeout(cb,0)}};this.fetchVFSMultipleItems=function(names,cbFetched){if(!local){var url=HQUriUtil.buildUrlWithMultiParam(HQUriUtil.getUrlHQServices("vfs/multi"),"file",names);$http(getDefaultReadConfig({url:url,method:"GET"})).success(function(response){cbFetched(response)}).error(function(data,status,headers,config){handleError(data,status,headers,config)})}else{function cb(){cbFetched({})}setTimeout(cb,
0)}};this.postVFSFile=function(path,fileinfo,cbCreated){if(!local){var url=HQUriUtil.getUrlHQServices("vfs/file");if(path!=null)url+="/"+path;$http(getDefaultReadConfig({url:url,method:"POST",data:JSON.stringify(fileinfo)})).success(function(response){cbCreated(response)}).error(function(data,status,headers,config){handleError(data,status,headers,config)})}else{function cb(){cbCreated({"todo":"todo"})}setTimeout(cb,0)}};this.deleteVFSFile=function(path,cbDeleted){var url=HQUriUtil.getUrlHQServices("vfs/file");
if(path!=null)url+="/"+path;$http(getDefaultReadConfig({url:url,method:"DELETE"})).success(function(response){cbDeleted(response)}).error(function(data,status,headers,config){handleError(data,status,headers,config)})};this.postEventletToXML=function(eventlet,cbCreated){var url=HQUriUtil.getUrlHQServices("eventlet/toxml");$http(getDefaultReadConfig({url:url,method:"POST",data:JSON.stringify(eventlet)})).success(function(response){cbCreated(response)}).error(function(data,status,headers,config){handleError(data,
status,headers,config)})};this.postEventletToJSON=function(doc,cbCreated){var url=HQUriUtil.getUrlHQServices("eventlet/tojson");$http(getDefaultReadConfig({url:url,method:"POST",data:JSON.stringify(doc)})).success(function(response){cbCreated(response)}).error(function(data,status,headers,config){handleError(data,status,headers,config)})};this.postResources=function(resources,cbDone){if(!local){var url=HQUriUtil.getUrlHQServices("resources");$http(getDefaultReadConfig({url:url,method:"POST",data:JSON.stringify(resources)})).success(function(response){cbDone(response)}).error(function(data,
status,headers,config){handleError(data,status,headers,config)})}else{function cb(){cbDone({"todo":"todo"})}setTimeout(cb,0)}};this.updateStatement=function(endpointName,engineURI,statementName,statement,cbUpdated){if(!local){var url=HQUriUtil.getUrlHQServices("endpoint/"+encodeURIComponent(endpointName)+"/engine/"+encodeURIComponent(engineURI)+"/statement/"+encodeURIComponent(statementName));$http(getDefaultWriteConfig({url:url,method:"PUT",data:JSON.stringify(statement)})).success(function(response){cbUpdated(response)}).error(function(data,
status,headers,config){handleError(data,status,headers,config)})}else{function cb(){cbUpdated({"todo":"todo"})}setTimeout(cb,0)}};this.deleteDeployment=function(endpointName,engineURI,deploymentId,cbDeleted){if(!local){var url=HQUriUtil.getUrlHQServices("endpoint/"+encodeURIComponent(endpointName)+"/engine/"+encodeURIComponent(engineURI)+"/deployment/"+encodeURIComponent(deploymentId));$http(getDefaultWriteConfig({url:url,method:"DELETE"})).success(function(response){cbDeleted()}).error(function(data,
status,headers,config){handleError(data,status,headers,config)})}else{function cb(){cbDeleted()}setTimeout(cb,0)}};this.updateDeployment=function(endpointName,engineURI,deploymentId,deployment,cbUpdated){if(!local){var url=HQUriUtil.getUrlHQServices("endpoint/"+encodeURIComponent(endpointName)+"/engine/"+encodeURIComponent(engineURI)+"/deployment/"+encodeURIComponent(deploymentId));$http(getDefaultWriteConfig({url:url,method:"PUT",data:JSON.stringify(deployment)})).success(function(response){cbUpdated(response)}).error(function(data,
status,headers,config){handleError(data,status,headers,config)})}else{function cb(){cbUpdated({"todo":"todo"})}setTimeout(cb,0)}}});module.service("dialogService",function($window){if($window.esperjsshared===undefined){$window.esperjsshared={};$window.esperjsshared.openDialogCB=null;$window.esperjsshared.consumerMgmtService=new ConsumerMgmtService;$window.esperjsshared.offset={x:50,y:100};$window.esperjsshared.indexEventTarget=new EventTarget;$window.esperjsshared.onbeforeunloadEventTarget=new BrowserClosedEventTarget}this.getIndexEventTarget=
function(){return $window.esperjsshared.indexEventTarget};this.setOpenDialogCallback=function(callback){$window.esperjsshared.openDialogCB=callback};this.getOpenDialogCallback=function(){return $window.esperjsshared.openDialogCB};this.getConsumerMgmtService=function(){return $window.esperjsshared.consumerMgmtService};this.getBrowserClosedEventTarget=function(){return $window.esperjsshared.onbeforeunloadEventTarget};this.getXYWindowOffset=function(){var currentOffset=$window.esperjsshared.offset;if(currentOffset.x>
400||currentOffset.y>300)currentOffset={x:50,y:100};else currentOffset={x:currentOffset.x+100,y:currentOffset.y+20};$window.esperjsshared.offset=currentOffset;return currentOffset}})};function HQUUIDGenerator(){}HQUUIDGenerator.generateUUID=function(){var currentdate=new Date;var month=currentdate.getMonth()+1;var day=currentdate.getDate();var datetime=currentdate.getFullYear()+((""+month).length<2?"0":"")+month+((""+day).length<2?"0":"")+day;datetime+="_"+currentdate.getHours()+currentdate.getMinutes()+currentdate.getSeconds();return""+Math.round(Math.random()*1E9)+"_"+datetime};function HQJqueryUtil(){}
HQJqueryUtil.checkHandleLoadStatus=function(url,response,status,xhr){if(xhr.status==200)return true;alert("Failed to load url '"+url+"', status "+xhr.status);return false};HQJqueryUtil.printDimensions=function(title,element){return" title "+title+" width "+element.width()+" height "+element.height()};HQJqueryUtil.getChildElementIndex=function($parent,$child){var children=$parent.children();var c=$child.get(0);for(var i=0;i<children.length;i++){var child=children.get(i);if(child==c)return i}return-1};
HQJqueryUtil.removeClassDeep=function($target,clazz){$.each($target.find("."+clazz),function(index,element){$(element).removeClass(clazz)})};HQJqueryUtil.findFirstChildElementUnderId=function(root,id){var element=HQJqueryUtil.findElementById(root,id);if(element==null)return null;if(element.children().length!=1){alert("Element by id '"+id+"' has multiple child nodes");return null}return element.children(":first")};
HQJqueryUtil.findElementById=function(root,id){var element=root.find("#"+id);if(element.length!=1){alert("Failed to find element by id '"+id+"'");return null}return element};HQJqueryUtil.insertAtPosition=function(root,child,position){if(root.length!=1)throw new Error("Multiple roots");if(root.children().length==0)root.append(child);else if(position==0)root.prepend(child);else{var found=root.children().get(position-1);$(found).after(child)}};function HQTableUtil(){}
HQTableUtil.applyDeploymentsTable=function(table,deployments){var myarr=[];for(var i=0;i<deployments.length;i++){var row=deployments[i];myarr.push([row["deploymentId"],HQStringUtil.surroundByPreTagWithClass(row["text"],"predefined-30wide"),row["state"],HQStringUtil.emptyString(row["moduleName"]),HQStringUtil.emptyString(row["moduleURI"]),HQStringUtil.emptyString(row["archive"]),HQStringUtil.emptyString(row["userObject"]),HQStringUtil.emptyString(row["uses"]),HQStringUtil.emptyString(row["imports"]),
HQStringUtil.emptyString(row["addedDate"]),HQStringUtil.emptyString(row["lastUpdateDate"])])}table.fnClearTable();table.fnAddData(myarr)};
HQTableUtil.applyPropertiesSummaryTable=function(table,properties){var myarr=[];for(var i=0;i<properties.length;i++){var row=properties[i];var special="";if(row.indexed&&row.requiresIndex)special+="indexed (requires index)";else if(row.indexed)special+="indexed";else if(row.mapped&&row.requiresMapkey)special+="mapped (requires key)";else if(row.mapped)special+="mapped";myarr.push([row["propertyName"],row["propertyType"],special,HQStringUtil.emptyString(row["fragmentTypeName"])])}table.fnClearTable();
table.fnAddData(myarr)};
HQTableUtil.createTableFromPropsAndEvents=function(tableelement,properties,events){var rowhead=tableelement.children(":first").children(":first");rowhead.append("\x3cth\x3eRow Number\x3c/th\x3e");for(i=0;i<properties.length;i++){var name=properties[i].propertyName;rowhead.append("\x3cth\x3e"+name+"\x3c/th\x3e")}var resultTable=tableelement.dataTable(HQTableUtil.getDefaultFullDatatableConfig({}));var myarr=[];for(var i=0;i<events.length;i++){var event=events[i];var row=[];row.push(""+(i+1));for(var j=
0;j<properties.length;j++){var propName=properties[j].propertyName;row.push(event[propName])}myarr.push(row)}resultTable.fnClearTable();resultTable.fnAddData(myarr);return resultTable};
HQTableUtil.populateTableHeader=function(tableelement,columnDef,htmlTable){var head=tableelement.find("thead");head.empty();head.append("\x3ctr\x3e\x3c/tr\x3e");var rowhead=head.children(":first-child()");for(var i=0;i<columnDef.length;i++){var def=columnDef[i];var visible;if(htmlTable)visible=def.isHtmlTableVisible;else visible=def.isDatatableColumn;if(visible)rowhead.append("\x3cth align\x3d'left'\x3e"+def.headerText+"\x3c/th\x3e")}};
HQTableUtil.getDefaultPlainDatatableConfig=function(additionalSettings){var defaultSettings=HQObjectUtil.copyObject({"bPaginate":false,"bLengthChange":false,"bFilter":false,"bInfo":false,"bAutoWidth":false,aoColumnDefs:[{sClass:"td-column-align-top",aTargets:["_all"]}]});HQObjectUtil.mergeObject(additionalSettings,defaultSettings);return defaultSettings};
HQTableUtil.getDefaultFullDatatableConfig=function(additionalSettings){var defaultSettings=HQObjectUtil.copyObject({"aLengthMenu":[[10,25,50,100,-1],[10,25,50,100,"All"]],aoColumnDefs:[{sClass:"td-column-align-top",aTargets:["_all"]}]});HQObjectUtil.mergeObject(additionalSettings,defaultSettings);return defaultSettings};function HQStringUtil(){}HQStringUtil.surroundByPreTag=function(value){return"\x3cpre\x3e"+HQStringUtil.escapeHTML(value)+"\x3c/pre\x3e"};
HQStringUtil.surroundByPreTagWithClass=function(value,clazz){return'\x3cpre class\x3d"'+clazz+'"\x3e'+HQStringUtil.escapeHTML(value)+"\x3c/pre\x3e"};HQStringUtil.numericAfterPrefix=function(text,prefix){return parseInt(text.substr(prefix.length))};HQStringUtil.startsWith=function(text,prefix){return text.indexOf(prefix)==0};HQStringUtil.endsWith=function(text,suffix){return text.indexOf(suffix,text.length-suffix.length)!==-1};
HQStringUtil.isPopulatedStringType=function(str){return!(str==null||$.trim(str).length==0||typeof str!="string")};HQStringUtil.isPopulated=function(str){return!(str==null||$.trim(str).length==0)};HQStringUtil.replaceAll=function(find,replace,str){return str.replace(new RegExp(find,"g"),replace)};HQStringUtil.formatDateAndText=function(date,text){return HQDateUtil.printDate(date)+": "+text};HQStringUtil.emptyString=function(arg){if(arg==undefined||arg==null)return"";return arg};
HQStringUtil.firstNChars=function(text,numchars){if(text==null)return"";if(text.length<numchars)return text;return text.substr(0,numchars)+"..."};HQStringUtil.csvFromArrayOfObject=function(array,keyName){var items=[];if(array==null||!(array instanceof Array)||array.length==0)return"";for(var i=0;i<array.length;i++){var value=array[i][keyName];items.push(value)}return HQStringUtil.csvFromArray(items)};
HQStringUtil.csvFromArray=function(array){var items="";var delimiter="";if(array==null||!(array instanceof Array)||array.length==0)return items;for(var i=0;i<array.length;i++){items+=delimiter;items+=array[i];delimiter=", "}return items};HQStringUtil.csvFromDateArray=function(array){var items=[];for(var i=0;i<array.length;i++)items.push(HQDateUtil.printDate(array[i]));return HQStringUtil.csvFromArray(items)};
HQStringUtil.escapeHTML=function(html){return html.replace(/&/g,"\x26amp;").replace(/>/g,"\x26gt;").replace(/</g,"\x26lt;").replace(/"/g,"\x26quot;")};HQStringUtil.decodeHTML=function(html){return html.replace(/&quot;/g,'"').replace(/&gt;/g,"\x3e").replace(/&lt;/g,"\x3c").replace(/&amp;/g,"\x26")};
HQStringUtil.getHumanSizeBytes=function(size){if(typeof size!="number")return"";var SizePrefixes=" KMGTPEZYXWVU";if(size<=0)return"0";var t2=Math.min(Math.round(Math.log(size)/Math.log(1024)),12);return Math.round(size*100/Math.pow(1024,t2))/100+" "+SizePrefixes.charAt(t2).replace(" ","")+"B"};function HQUriUtil(){}HQUriUtil.getUrlHQServices=function(subpath){return HQ_ESPERHQAPP_URL+"hqapi/v1/"+subpath};HQUriUtil.getUrlViews=function(url){return HQ_ESPERHQAPP_URL+url};
HQUriUtil.getUrlViewsRelative=function(url){return url};HQUriUtil.getURLParameterMap=function(nameValueEnum){var result={};for(var key in nameValueEnum)if(nameValueEnum.hasOwnProperty(key)){var name=nameValueEnum[key];var param=HQUriUtil.getURLParameter(name);if(param!==undefined&&param!=null&&param!="null")result[name]=param}return result};HQUriUtil.getURLParameter=function(name){return decodeURI((RegExp(name+"\x3d"+"(.+?)(\x26|$)").exec(location.search)||[,null])[1])};
HQUriUtil.buildUrlWithMultiParam=function(url,paramname,names){if(names.length==0)return url;if(names.length==1)return url+"?"+paramname+"\x3d"+encodeURIComponent(HQStringUtil.emptyString(names[0]));url=url+"?"+paramname+"\x3d"+encodeURIComponent(HQStringUtil.emptyString(names[0]));for(var i=1;i<names.length;i++)url=url+"\x26"+paramname+"\x3d"+encodeURIComponent(HQStringUtil.emptyString(names[i]));return url};
HQUriUtil.addParameter=function(url,parameterName,parameterValue,atStart){var replaceDuplicates=true;var urlhash;if(url.indexOf("#")>0){var cl=url.indexOf("#");urlhash=url.substring(url.indexOf("#"),url.length)}else{urlhash="";cl=url.length}var sourceUrl=url.substring(0,cl);var urlParts=sourceUrl.split("?");var newQueryString="";if(urlParts.length>1){var parameters=urlParts[1].split("\x26");for(var i=0;i<parameters.length;i++){var parameterParts=parameters[i].split("\x3d");if(!(replaceDuplicates&&
parameterParts[0]==parameterName)){if(newQueryString=="")newQueryString="?";else newQueryString+="\x26";newQueryString+=parameterParts[0]+"\x3d"+(parameterParts[1]?parameterParts[1]:"")}}}if(newQueryString=="")newQueryString="?";if(atStart)newQueryString="?"+parameterName+"\x3d"+parameterValue+(newQueryString.length>1?"\x26"+newQueryString.substring(1):"");else{if(newQueryString!==""&&newQueryString!="?")newQueryString+="\x26";newQueryString+=parameterName+"\x3d"+(parameterValue?parameterValue:"")}return urlParts[0]+
newQueryString+urlhash};HQUriUtil.addUUIDToUrl=function(url){var noCacheUuid=HQUUIDGenerator.generateUUID();return HQUriUtil.addParameter(url,"uuid",noCacheUuid,0)};function HQEaselUtil(){}
HQEaselUtil.makeTextbox=function(texts){var pad=10;var content=[];var currY=pad;var lastShape;for(var i=0;i<texts.length;i++){var txt=new createjs.Text("","13px Lucida Grande","black");txt.text=texts[i];txt.lineWidth=200;txt.textBaseline="top";txt.textAlign="left";txt.x=pad;txt.y=currY;currY+=txt.getMeasuredHeight()+pad;content.push(txt);lastShape=txt;if(i<texts.length-1){var div=new createjs.Shape;div.graphics.setStrokeStyle(1);div.graphics.beginStroke("black");div.graphics.moveTo(0,currY-pad/2);
div.graphics.lineTo(txt.lineWidth+2*pad,currY-pad/2);content.push(div)}}var totalTextHeight=lastShape.y+txt.getMeasuredHeight()+pad;var bg=new createjs.Shape;bg.graphics.beginStroke("black");bg.graphics.beginFill("white");var width=txt.lineWidth+pad*2;bg.graphics.drawRoundRect(0,0,width,totalTextHeight,10);var container=new createjs.Container;container.addChild(bg);for(i=0;i<content.length;i++)container.addChild(content[i]);return new HQEaselContainer(container,width,totalTextHeight)};
function HQEaselContainer(container,width,height){this.container=container;this.width=width;this.height=height}function HQCollectionUtil(){}HQCollectionUtil.sumIgnoreNull=function(values){var total=0;for(var i=0;i<values.length;i++)if(typeof values[i]=="number")total+=values[i];return total};HQCollectionUtil.enumToArray=function(enumobj){var result=[];for(var key in enumobj){if(!enumobj.hasOwnProperty(key))continue;result.push(enumobj[key])}return result};
HQCollectionUtil.findDuplicateJSON=function(array,value){var json=JSON.stringify(value);for(var i=0;i<array.length;i++)if(JSON.stringify(array[i])==json)return true;return false};HQCollectionUtil.findInsertIndexStringSortedArray=function(array,value){if(array.length==0)return 0;for(var i=0;i<array.length;i++){var item=array[i];if(item>value)return i}return array.length};
HQCollectionUtil.removeFromArrayWhereSmaller=function(array,key,max){var index=-1;var result=[];for(var i=0;i<array.length;i++){var value=array[i][key];if(value>=max)break;index=i;result.push(array[i])}if(index!=-1)array.splice(0,index+1);return result};HQCollectionUtil.removeFromArrayFirst=function(array,element){for(var i=0;i<array.length;i++)if(array[i]==element){array.splice(i,1);break}};
HQCollectionUtil.filterArray=function(array,filterFunction){var result=[];for(var i=0;i<array.length;i++)if(filterFunction(array[i]))result.push(array[i]);return result};HQCollectionUtil.arrayToMapOfArray=function(array,fieldName){var result={};for(var i=0;i<array.length;i++){var row=array[i];var key=row[fieldName];if(!result.hasOwnProperty(key))result[key]=[];result[key].push(row)}return result};
HQCollectionUtil.arrayToMap=function(array,fieldName){var result={};for(var i=0;i<array.length;i++){var row=array[i];var key=row[fieldName];result[key]=row}return result};HQCollectionUtil.valueSetToSortedArray=function(aset){var sorted=[];for(var key in aset)if(aset.hasOwnProperty(key))sorted.push(key);sorted.sort();return sorted};
HQCollectionUtil.mapToSortedArrayOfValues=function(amap){var keys=[];for(var key in amap)if(amap.hasOwnProperty(key))keys.push(key);keys.sort();var sortedValues=[];for(var i=0;i<keys.length;i++)sortedValues.push(amap[keys[i]]);return sortedValues};
HQCollectionUtil.getOrderedByDepth=function(items){var idMap={};var entry;var id;var dependencies;var i;for(i=0;i<items.length;i++){entry=items[i];id=entry["id"];dependencies=entry["dependencies"];idMap[id]=dependencies}var idMapCompleted={};var chainLengthPerId=[];var stack=null;var recursiveDependencies=null;var chainLength=null;for(i=0;i<items.length;i++){entry=items[i];id=entry["id"];stack={};stack[id]=true;recursiveDependencies=HQCollectionUtil.getDependenciesRecursiveAll(id,idMap,stack);chainLength=
{"id":id};if(recursiveDependencies!=null)chainLength["num"]=recursiveDependencies.length;else chainLength["num"]=0;chainLengthPerId.push(chainLength)}chainLengthPerId.sort(function(a,b){return a.num-b.num});var result=[];var item;for(i=0;i<chainLengthPerId.length;i++){item=chainLengthPerId[i];result.push(item["id"])}return result};
HQCollectionUtil.getGroups=function(items){var idMap={};var entry;var id;var dependencies;for(var i=0;i<items.length;i++){entry=items[i];id=entry["id"];dependencies=entry["dependencies"];idMap[id]=dependencies}var idMapCompleted={};var groups=[];var recursiveDependencies;for(i=0;i<items.length;i++){entry=items[i];id=entry["id"];if(idMapCompleted[id]==null){idMapCompleted[id]=true;recursiveDependencies=HQCollectionUtil.getDependenciesRecursiveIncompleted(id,idMap,idMapCompleted);if(recursiveDependencies==
null)recursiveDependencies=[];recursiveDependencies.push(id);groups.push(recursiveDependencies)}}return groups};
HQCollectionUtil.getDependenciesRecursiveIncompleted=function(currentId,idMap,idMapCompleted){var dependencies=idMap[currentId];if(dependencies==null)return null;if(dependencies.length==0)return null;var all=[];var item;for(var i=0;i<dependencies.length;i++){item=dependencies[i];if(idMapCompleted[item]!=null)continue;idMapCompleted[item]=true;all.push(item);var itsDependencies=HQCollectionUtil.getDependenciesRecursiveIncompleted(item,idMap,idMapCompleted);if(itsDependencies!=null)all=all.concat(itsDependencies)}return all};
HQCollectionUtil.getDependenciesRecursiveAll=function(currentId,idMap,stack){var dependencies=idMap[currentId];if(dependencies==null)return null;if(dependencies.length==0)return null;var all=[];var item;for(var i=0;i<dependencies.length;i++){item=dependencies[i];if(stack[item]!=null)continue;all.push(item);stack[currentId]=true;var itsDependencies=HQCollectionUtil.getDependenciesRecursiveAll(item,idMap,stack);if(itsDependencies!=null)all=all.concat(itsDependencies)}return all};
HQCollectionUtil.arrayToSingleValueRowArray=function(array){var result=[];for(var i=0;i<array.length;i++){var value=array[i];result.push([value])}return result};HQCollectionUtil.objectKeysNotIn=function(objectOne,objectTwo){var keys=[];for(var keyOne in objectOne)if(objectOne.hasOwnProperty(keyOne)){var found=false;for(var keyTwo in objectTwo)if(keyTwo==keyOne){found=true;break}if(!found)keys.push(keyOne)}return keys};
HQCollectionUtil.mapToArray=function(amap,keyArray){var result=[];for(var i=0;i<keyArray.length;i++){var value=amap[keyArray[i]];result.push(value)}return result};HQCollectionUtil.findObjectValueInArray=function(array,objectkey,value){if(array==null)return-1;for(var i=0;i<array.length;i++){var row=array[i];if(row[objectkey]==value)return i}return-1};
HQCollectionUtil.getObjectValueInArrayWDefault=function(array,objectkey,value,defaultValue){if(array==null)return defaultValue;for(var i=0;i<array.length;i++){var row=array[i];if(row[objectkey]==value)return row}return defaultValue};HQCollectionUtil.findValueInArray=function(array,value){for(var i=0;i<array.length;i++){var row=array[i];if(row==value)return i}return-1};
HQCollectionUtil.addArrayElementNoDuplicates=function(array,objectkey,value,valueToAdd){var index=HQCollectionUtil.findObjectValueInArray(array,objectkey,value);if(index==-1)array.push(valueToAdd)};function HQImageLoader(){}
HQImageLoader.loadImages=function(imageMap,callback){var result={};var image;var key;var count=0;for(key in imageMap){if(!imageMap.hasOwnProperty(key))continue;image=new Image;image.src=imageMap[key];result[key]=image;count++}var imagesLoaded=0;var cbLoaded=function(){imagesLoaded++;if(imagesLoaded==count)callback(result)};for(key in result){if(!result.hasOwnProperty(key))continue;result[key].onload=cbLoaded}};function HQCodeMessageUtil(){}
HQCodeMessageUtil.setMessages=function(messagesTable,editor,details){var myarr=[];for(var i=0;i<details.length;i++){var detail=details[i];if(detail.hasOwnProperty("line")){var line=detail["line"];myarr.push([line,detail["exceptionMessage"]]);editor.setGutterMarker(line-1,"editor-validations",HQCodeMessageUtil.makeMarkerValidationMsg())}else myarr.push(["",detail["exceptionMessage"]])}messagesTable.fnAddData(myarr);editor.refresh()};
HQCodeMessageUtil.clearGutterAndMessages=function(editor,messagesTable){messagesTable.fnClearTable();editor.clearGutter("editor-validations");editor.refresh()};HQCodeMessageUtil.clearMessages=function(editor){editor.refresh()};HQCodeMessageUtil.makeMarkerValidationMsg=function(){var marker=document.createElement("div");marker.className="editor-validation";marker.innerHTML="!";return marker};
HQCodeMessageUtil.makeMarkerBreakpoint=function(){var marker=document.createElement("div");marker.style.color="#822";marker.innerHTML="\x26#9679;";return marker};function HQDateUtil(){}HQDateUtil.getTimezoneOffset=function(){var d=new Date;var n=d.getTimezoneOffset();return n*60*1E3};HQDateUtil.printCurrentDate=function(){return HQDateUtil.printDate(new Date)};
HQDateUtil.printDate=function(d){if(typeof d=="number")d=new Date(d);if(typeof d=="string")d=HQDateUtil.xmlDateStringWithZoneToDate(d);if(typeof d=="undefined"||d==null)return"";var s=function(a,b){return(1E15+a+"").slice(-b)};if(d instanceof Date)return d.getFullYear()+"-"+s(d.getMonth()+1,2)+"-"+s(d.getDate(),2)+" "+s(d.getHours(),2)+":"+s(d.getMinutes(),2)+":"+s(d.getSeconds(),2)+"."+s(d.getMilliseconds(),3);return date};
HQDateUtil.xmlDateStringWithZoneToUTC=function(xmlDate){var re=/^([0-9]{4,})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2}):([0-9]{2})(\.[0-9]+)?(Z|([+-])([0-9]{2}):([0-9]{2}))?$/;var match=xmlDate.match(re);if(!match)return null;var all=match[0];var year=match[1];var month=match[2];var day=match[3];var hour=match[4];var minute=match[5];var second=match[6];var milli=match[7];if(HQStringUtil.isPopulated(milli)&&HQStringUtil.startsWith(milli,".")&&milli.length>1)milli=milli.substr(1);var z_or_offset=match[8];
var offset_sign=match[9];var offset_hour=match[10];var offset_minute=match[11];if(offset_sign){var direction=offset_sign=="+"?1:-1;hour=parseInt(hour)+parseInt(offset_hour)*direction;minute=parseInt(minute)+parseInt(offset_minute)*direction}return Date.UTC(year,month-1,day,hour,minute,second,milli||0)};
HQDateUtil.xmlDateStringNoZoneToUTC=function(xmlDate){var re=/^([0-9]{4,})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2}):([0-9]{2})(\.[0-9]+)?(Z|([+-])([0-9]{2}):([0-9]{2}))?$/;var match=xmlDate.match(re);if(!match)return null;var all=match[0];var year=match[1];var month=match[2];var day=match[3];var hour=match[4];var minute=match[5];var second=match[6];var milli=match[7];var d=new Date;d.setYear(year);d.setMonth(month-1);d.setDate(day);d.setHours(hour);d.setMinutes(minute);d.setSeconds(second);d.setMilliseconds(milli||
0);return d.getTime()};HQDateUtil.xmlDateStringWithZoneToDate=function(xmlDate){var utcDate=HQDateUtil.xmlDateStringWithZoneToAdjustedUTC(xmlDate);if(utcDate==null)return null;return new Date(utcDate)};HQDateUtil.xmlDateStringWithZoneToAdjustedUTC=function(xmlDate){var utcDate=HQDateUtil.xmlDateStringWithZoneToUTC(xmlDate);if(utcDate==null)return null;var d=new Date;var n=d.getTimezoneOffset();utcDate+=n*60*1E3;return utcDate+n*60*1E3};
HQDateUtil.subtractMilliseconds=function(date,msecDelta){var msec=date.getTime();msec=msec-msecDelta;var d=new Date;d.setTime(msec);return d};function HQAuditMessageTableUtil(){}HQAuditMessageTableUtil.applyLogMsg=function(table,audit){var myarr=[];for(var i=0;i<audit.length;i++){var row=audit[i];if(row.hasOwnProperty("messageAudit"))myarr.push([HQDateUtil.printDate(row.messageAudit.time),row.messageAudit.level,row.messageAudit.message])}table.fnClearTable();table.fnAddData(myarr)};
function HQObjectUtil(){}HQObjectUtil.isArray=function(object){return object instanceof Array};HQObjectUtil.countProperties=function(object){if(object==null)return-1;var props=0;for(var key in object)if(object.hasOwnProperty(key))props++;return props};HQObjectUtil.populatePropertyFromObjectOwned=function(source,target){for(var key in target)if(source.hasOwnProperty(key)&&target.hasOwnProperty(key))target[key]=source[key]};
HQObjectUtil.isFunction=function(functionName,objectName,func,object){if(typeof func!=="function")alert(objectName+" does not have a function "+functionName+", object ctor is "+object.constructor)};HQObjectUtil.assertProperty=function(obj,property){if(!obj.hasOwnProperty(property))throw"Object does not have property '"+property+"' object "+JSON.stringify(obj);return obj[property]};HQObjectUtil.copyObject=function(obj){if(obj==null)return null;return JSON.parse(JSON.stringify(obj))};
HQObjectUtil.mergeObject=function(source,target){if(source==null||target==null)return;for(var key in source)if(source.hasOwnProperty(key))target[key]=source[key];return target};function HQPushUtil(){}
HQPushUtil.activateEventlet=function(activation,consumerMgmt,parameters,websocketAndActivationReadyCallback){var subtopic=activation.subtopic;var consumerWrapper=consumerMgmt.getConsumerWrapper(subtopic);var websocketReadyCallback=function(){var eventletType=HQPushUtil.getCompositionEventletType(activation.composition);var eventlet;var composition;var eventletUrl=eventletType.url;if(eventletType==HQ_EVENTLET_TYPE.GRID){eventlet=new window[HQ_EVENTLET_TYPE.GRID.classname];composition=activation.composition}else if(eventletType==
HQ_EVENTLET_TYPE.CHART){eventlet=new window[HQ_EVENTLET_TYPE.CHART.classname];composition=activation.composition.chart}else if(eventletType==HQ_EVENTLET_TYPE.TIMELINE){eventlet=new window[HQ_EVENTLET_TYPE.TIMELINE.classname];composition=activation.composition.timeline}else if(eventletType==HQ_EVENTLET_TYPE.GAUGE){eventlet=new window[HQ_EVENTLET_TYPE.GAUGE.classname];composition=activation.composition.gauge}else if(eventletType==HQ_EVENTLET_TYPE.PLUGIN){try{eventlet=new window[activation.composition.plugin.classname]}catch(e){alert("Failed to resolve '"+
activation.composition.plugin.classname+"': "+e.stack);return}if(HQStringUtil.isPopulated(activation.composition.plugin.url))eventletUrl=activation.composition.plugin.url;composition=activation.composition.plugin}else throw new Error("Undefined composition "+JSON.stringify(activation.composition));var eventletShim=new EventletShim(eventlet,activation.eventletSettings);var context=new HQEventletActivation(composition,activation.activationName,activation.activationXML,activation.activationSources,parameters);
eventletShim.eventletConfigure(context);var response={activation:activation,eventletShim:eventletShim,consumerWrapper:consumerWrapper,eventletUrl:eventletUrl};websocketAndActivationReadyCallback(response)};if(consumerWrapper==null){console.log("Consumer for subtopic '"+subtopic+"' not found");var clientId=consumerMgmt.getClientId();var websocketURL=consumerMgmt.getWebsocketURL();var logEntries=new LogEntryColl(50);var consumerId=consumerMgmt.getIncrementConsumerNum();consumerWrapper=new ConsumerWrapper(clientId,
websocketURL,consumerId,logEntries,websocketReadyCallback);consumerMgmt.addConsumerWrapper(subtopic,consumerWrapper);console.log("Created new consumer for subtopic '"+subtopic+"' using consumer id "+consumerWrapper.getConsumerId())}else consumerWrapper.openReopenWebsocket(websocketReadyCallback)};
HQPushUtil.toCompositionPointSourceArray=function(pointsources,hasY){var psarray=[];for(var i=0;i<pointsources.length;i++){var ps=pointsources[i];if(ps.property!=null||HQStringUtil.isPopulated(ps.propertyName)){var x;if(ps.property!=null){x=ps.property.propertyName;if(ps.property.propertyCode!=null)x=ps.property.propertyCode}else x=ps.propertyName;var pointsource={sourceId:ps.resourceItem.index,x:x};if(hasY)if(ps.y_property!=null){pointsource.y=ps.y_property.propertyName;if(ps.y_property.propertyCode!=
null)pointsource.y=ps.y_property.propertyCode}else if(HQStringUtil.isPopulated(ps.y_propertyName))pointsource.y=ps.y_propertyName;else continue;psarray.push(pointsource)}}return psarray};
HQPushUtil.applyPointsources=function(pointsources,compositionPSArray,resourceItems,resourceDetails,hasY){if(compositionPSArray==null)compositionPSArray=[];if(compositionPSArray.length>pointsources.length)while(pointsources.length<compositionPSArray.length)pointsources.push(HQPushUtil.getDefaultPointsource(resourceItems,resourceDetails,hasY));for(var i=0;i<compositionPSArray.length;i++){var compositionPS=compositionPSArray[i];var index=compositionPS.sourceId;var resourceItem=null;var properties=null;
var propertyName=null;var property=null;var y_propertyName=null;var y_property=null;var propindex;if(index>-1&&index<resourceItems.length){resourceItem=resourceItems[index];properties=HQPushUtil.getPropertyArraySelectable(resourceItem,resourceDetails)}if(resourceItem!=null&&properties!=null){var xprop=HQPushUtil.findPropertyConsiderBuiltin(properties,compositionPS.x);property=xprop.property;propertyName=xprop.propertyName;if(hasY){var yprop=HQPushUtil.findPropertyConsiderBuiltin(properties,compositionPS.y);
y_property=yprop.property;y_propertyName=yprop.propertyName}}if(resourceItem!=null){pointsources[i]={resourceItem:resourceItem,properties:properties,property:property,propertyName:propertyName};if(hasY){pointsources[i].y_property=y_property;pointsources[i].y_propertyName=y_propertyName}}}};
HQPushUtil.findPropertyConsiderBuiltin=function(properties,provided){var propindex=HQCollectionUtil.findObjectValueInArray(properties,"propertyName",provided);if(propindex!=-1)return{property:properties[propindex]};var builtin=HQEnumUtil.findEnumValue(HQ_BUILTIN_PROPERTIES_TYPE,"code",provided);if(builtin!=null){var indexBuiltin=HQCollectionUtil.findObjectValueInArray(properties,"propertyName",builtin.name);if(indexBuiltin!=-1)return{property:properties[indexBuiltin]}}return{propertyName:provided}};
HQPushUtil.getDefaultPointsource=function(resourceItems,resourceDetails,addYProperty){var defaultResource=resourceItems.length>0?resourceItems[0]:null;var defaultProperties=HQPushUtil.getPropertyArraySelectable(defaultResource,resourceDetails);var ps={resourceItem:defaultResource,properties:defaultProperties,property:null,propertyName:null};ps.y_property=null;ps.y_propertyName=null;return ps};
HQPushUtil.getResourceArraySelectable=function(resources){var i;var result=[];for(i=0;i<resources.length;i++){var sourceDesc=resources[i];var info=HQPushUtil.getResourceDetail(sourceDesc);var name=info.type+" "+info.name;result.push({resourceName:name,index:i})}return result};
HQPushUtil.getPropertyArraySelectable=function(selectableResource,resourceDetails){var result=[];result.push({propertyName:HQ_BUILTIN_PROPERTIES_TYPE.EVENTARRIVALTIME.name,propertyCode:HQ_BUILTIN_PROPERTIES_TYPE.EVENTARRIVALTIME.code});result.push({propertyName:HQ_BUILTIN_PROPERTIES_TYPE.EVENTARRIVALTIMEUTC.name,propertyCode:HQ_BUILTIN_PROPERTIES_TYPE.EVENTARRIVALTIMEUTC.code});if(selectableResource==null)return result;var resourceDetail=resourceDetails[selectableResource.index];if(resourceDetail==
null||resourceDetail.statement==null)return result;for(var i=0;i<resourceDetail.statement.properties.length;i++){var propertyName=resourceDetail.statement.properties[i].propertyName;result.push({propertyName:propertyName})}return result};
HQPushUtil.getResourceDetail=function(sourceDesc){var type,name,detail,endpoint,engine;if(sourceDesc.statement!=null){type="Statement";name=sourceDesc.statement.name;detail="Unfiltered";if(sourceDesc.statement.filter!=null)detail="Filtered by expression '"+sourceDesc.statement.filter+"'";endpoint=sourceDesc.statement.endpoint;engine=sourceDesc.statement.engineUri}else if(sourceDesc.statementSet!=null){type="Set Of Statements";if(HQStringUtil.isPopulated(sourceDesc.statementSet.includes)){name="";
detail=sourceDesc.statementSet.includes}else{name="Any Statement";detail=null}endpoint=sourceDesc.statementSet.endpoint;engine=sourceDesc.statementSet.engineUri}else if(sourceDesc.variable!=null){type="Variable";name=sourceDesc.variable.name;detail="";endpoint=sourceDesc.variable.endpoint;engine=sourceDesc.variable.engineUri}else if(sourceDesc.onDemandQuery!=null){type="On-Demand Query";name="";detail=sourceDesc.onDemandQuery.query;endpoint=sourceDesc.onDemandQuery.endpoint;engine=sourceDesc.onDemandQuery.engineUri}else if(sourceDesc.engineMetric!=
null){type="Engine Metric";name=sourceDesc.engineMetric.name;detail="";endpoint=sourceDesc.engineMetric.endpoint;engine=sourceDesc.engineMetric.engineUri}else throw new Error("Unrecognized row type");return{type:type,name:name,detail:detail,endpoint:endpoint,engineUri:engine}};
HQPushUtil.getIterateDesc=function(sourceDesc){if(sourceDesc.statement!=null)return sourceDesc.statement.iterate;else if(sourceDesc.statementSet!=null)return null;else if(sourceDesc.variable!=null)return sourceDesc.variable.iterate;else if(sourceDesc.onDemandQuery!=null)return sourceDesc.onDemandQuery.iterate;else if(sourceDesc.engineMetric!=null)return sourceDesc.engineMetric.iterate;else throw new Error("Unrecognized row type");};
HQPushUtil.isStatementSetSource=function(sourceDesc){return sourceDesc.statementSet!=null};
HQPushUtil.setIterateDesc=function(sourceDesc,iterateDesc){if(sourceDesc.statement!=null)sourceDesc.statement.iterate=iterateDesc;else if(sourceDesc.statementSet!=null);else if(sourceDesc.variable!=null)sourceDesc.variable.iterate=iterateDesc;else if(sourceDesc.onDemandQuery!=null)sourceDesc.onDemandQuery.iterate=iterateDesc;else if(sourceDesc.engineMetric!=null)sourceDesc.engineMetric.iterate=iterateDesc;else throw new Error("Unrecognized row type");};
HQPushUtil.getCompositionEventletType=function(composition){if(composition.appendgrid!=null||composition.inplacegrid!=null||composition.compositegrid!=null)return HQ_EVENTLET_TYPE.GRID;else if(composition.chart!=null)return HQ_EVENTLET_TYPE.CHART;else if(composition.timeline!=null)return HQ_EVENTLET_TYPE.TIMELINE;else if(composition.gauge!=null)return HQ_EVENTLET_TYPE.GAUGE;else if(composition.plugin!=null)return HQ_EVENTLET_TYPE.PLUGIN;else throw new Error("Undefined composition "+JSON.stringify(composition));
};HQPushUtil.computeDatafieldName=function(propertyDesc){if(propertyDesc!=null&&!propertyDesc.nameHasDot)return propertyDesc.name;return propertyDesc.name.replace(".","-")};HQPushUtil.getTargetType=function(target){if(target==null)return"undefined target";if(target.hasOwnProperty("statement"))return"Statement";if(target.hasOwnProperty("engine"))return"Metric";if(target.hasOwnProperty("onDemandQuery"))return"On-Demand Query";if(target.hasOwnProperty("variable"))return"Variable";return"defined target"};
HQPushUtil.getTargetName=function(target){if(target==null)return"undefined target";if(target.hasOwnProperty("statement"))return target.statement.statement.statementName;if(target.hasOwnProperty("engine"))return target.engine.type;if(target.hasOwnProperty("onDemandQuery"))return target.onDemandQuery.query;if(target.hasOwnProperty("variable"))return target.variable.variableName;return"defined target"};
HQPushUtil.renderTarget=function(target){if(target==null)return"undefined target";if(target.hasOwnProperty("statement"))return target.statement.statement.epl;if(target.hasOwnProperty("engine"))return target.engine.type;if(target.hasOwnProperty("onDemandQuery"))return target.onDemandQuery.query;if(target.hasOwnProperty("variable"))return target.variable.variableName;return"defined target"};
HQPushUtil.addPropsToPropDescMap=function(properties,propertyNameMap){for(var i=0;i<properties.length;i++){var propertyName=properties[i].propertyName;var propertyType=properties[i].propertyType;propertyNameMap[propertyName]=HQPushUtil.makePropertyDesc(propertyName,propertyType)}};HQPushUtil.makePropertyDesc=function(propertyName,propertyType){return new HQPropertyDesc(propertyName,propertyType)};
HQPushUtil.findProperty=function(properties,propertyName){for(var i=0;i<properties.length;i++)if(properties[i].propertyName==propertyName)return i;return-1};HQPushUtil.rerenderProperties=function(row,properties){for(var i=0;i<properties.length;i++){var prop=properties[i];var value=row[prop.propertyName];HQPushUtil.renderPropertyToRow(prop,value,row)}};HQPushUtil.renderPropertyToRow=function(p,val,row){row[HQPushUtil.computeDatafieldName(p)]=HQPushUtil.renderProperty(p,val)};
HQPushUtil.renderProperty=function(p,val){if(val==null)return"null";if(p!=null){if(p.type=="java.lang.Long"||p.type=="long"){if(isNaN(val))return val;if(val>1E9)return HQDateUtil.printDate(val);return val}if(p.indexed||p.mapped||p.fragmenttypename!=null)return JSON.stringify(val)}return val};HQPushUtil.computeDatafieldName=function(propertyDesc){return propertyDesc.propertyName};
HQPushUtil.renderPropertyValueNoMetadata=function(val){if(val==null)return"(null)";var type=typeof val;if(type=="number"&&val>1E9)return HQDateUtil.printDate(val);return val};function HQCollisionUtil(){}HQCollisionUtil.detectCollision=function(a,b){return!(a.y+a.height<b.y||a.y>b.y+b.height||a.x+a.width<b.x||a.x>b.x+b.width)};HQCollisionUtil.getCollisionAmountX=function(a,b){var delta;if(a.x<b.x)delta=a.x+a.width-b.x;else delta=b.x+b.width-a.x;return delta};
HQEventletTargetEntry=function(manifest){this.target=manifest.target;this.nameOfTarget=HQPushUtil.getTargetName(manifest.target);this.typeOfTarget=HQPushUtil.getTargetType(manifest.target);this.properties=manifest.definition.properties;this.propertiesMap={};if(this.properties!=null)for(var i=0;i<this.properties.length;i++)this.propertiesMap[this.properties[i].propertyName]=this.properties[i]};HQEnumUtil=function(){};
HQEnumUtil.findEnumValue=function(amap,key,findValue){for(var akey in amap){var theenum=amap[akey];var value=theenum[key];if(value==findValue)return theenum}return null};HQEnumUtil.findEnumValueWithDefault=function(amap,key,findValue,defaultValue){var found=HQEnumUtil.findEnumValue(amap,key,findValue);if(found)return found;return defaultValue};HQEndpointUtil=function(){};
HQEndpointUtil.getDefaultEndpoint=function(endpoints){for(var i=0;i<endpoints.length;i++)if(endpoints[i].isDefault)return endpoints[i];if(endpoints.length==0)alert("No endpoints founds");return endpoints[0]};HQEndpointUtil.getDefaultEngine=function(engines){if(engines==null||engines.length==0)return null;return engines[0]};HQXMLUtil=function(){};
HQXMLUtil.renderXML=function(myxml){var serializer=new XMLSerializer;var xml=serializer.serializeToString(myxml);xml=HQStringUtil.replaceAll('xmlns\x3d"http://www.w3.org/1999/xhtml"',"",xml);xml=HQStringUtil.replaceAll('xmlns\x3d"http://www.w3.org/2000/xhtml"',"",xml);return xml};HQXMLUtil.getElementMixedCase=function(elementName){return $.parseXML("\x3c"+elementName+"/\x3e").documentElement};
HQXMLUtil.formatXml=function(xml){var formatted="";var reg=/(>)(<)(\/*)/g;xml=xml.replace(reg,"$1\r\n$2$3");var pad=0;jQuery.each(xml.split("\r\n"),function(index,node){var indent=0;if(node.match(/.+<\/\w[^>]*>$/))indent=0;else if(node.match(/^<\/\w/)){if(pad!=0)pad-=1}else if(node.match(/^<\w[^>]*[^\/]>.*$/))indent=1;else indent=0;var padding="";for(var i=0;i<pad;i++)padding+="  ";formatted+=padding+node+"\r\n";pad+=indent});return formatted};HQFileSystemUtil=function(){};
HQFileSystemUtil.getDirectoryFileDataArray=function(path,files){var children=[];for(var i=0;i<files.length;i++){var file=files[i];var lazy=file.directory;var absolutePath=path==null?file.name:path+"/"+file.name;var containingFolderPath=path==null?null:path;children.push({key:absolutePath,title:file.name,isFolder:file.directory,isLazy:lazy,absolutePath:absolutePath,containingFolderPath:containingFolderPath})}return children};
HQFileSystemUtil.reconcileChildNodes=function(parent,childdata){var i,j,found;var childNodes=parent.getChildren();var newNodes=[];for(i=0;i<childdata.length;i++){var newpath=childdata[i].absolutePath;found=false;if(childNodes!=null)for(j=0;j<childNodes.length;j++){var oldPath=childNodes[j].data.absolutePath;if(oldPath==newpath){found=true;break}}if(!found)newNodes.push(childdata[i])}parent.addChild(newNodes);var deletedNodes=[];for(i=0;i<childNodes.length;i++){var existPath=childNodes[i].data.absolutePath;
found=false;for(j=0;j<childdata.length;j++){var childpath=childdata[j].absolutePath;if(existPath==childpath){found=true;break}}if(!found)deletedNodes.push(i)}var numDeleted=0;for(i=0;i<deletedNodes.length;i++){var index=deletedNodes[i];childNodes[index-numDeleted].remove();numDeleted++}var cmp=function(a,b){a=a.data.title.toLowerCase();b=b.data.title.toLowerCase();return a>b?1:a<b?-1:0};parent.sortChildren(cmp,false)};
HQFileSystemUtil.reconcileFolders=function(tree,files){for(var i=0;i<files.length;i++){var file=files[i];var node;var path;if(file.rootDir){path=null;node=HQFileSystemUtil.findNodeByPath(tree,null)}else{if(file.path==null)path=file.name;else path=file.path+"/"+file.name;node=HQFileSystemUtil.findNodeByPath(tree,path)}var children=HQFileSystemUtil.getDirectoryFileDataArray(path,file.files);HQFileSystemUtil.reconcileChildNodes(node,children)}};
HQFileSystemUtil.refreshFolders=function(restService,tree){var openFolders=[];var visitor=function(node){if(node.data.isFolder&&node.isExpanded())openFolders.push(node.data.absolutePath);return true};tree.getRoot().visit(visitor);var cbfetched=function(response){HQFileSystemUtil.reconcileFolders(tree,response.files)};restService.fetchVFSMultipleItems(openFolders,cbfetched)};HQFileSystemUtil.findNodeByPath=function(tree,path){if(path==null)return tree.getRoot().getChildren()[0];else return tree.getNodeByKey(path)};
HQWindowUtil=function(){};HQWindowUtil.openNewWindowFullscreen=function(url,title,scrollbars){var minWidth=Math.max(800,screen.width);var minHeight=Math.max(600,screen.height);var params=["height\x3d"+minHeight,"width\x3d"+minWidth,"fullscreen\x3dyes"];if(scrollbars)params.push("scrollbars\x3dyes");var paramsstr=params.join(",");var popup=window.open(url,title,paramsstr);popup.moveTo(0,0)};
HQWindowUtil.spinLoopSleep=function(milliseconds){var e=(new Date).getTime()+milliseconds;while((new Date).getTime()<=e);};
HQWindowUtil.startup=function(window,confirmLeave){var leave_message="Leaving this page means any data you have entered may not be saved.";function goodbye(e){if(confirmLeave){if(!e)e=window.event;e.cancelBubble=true;e.returnValue=leave_message;if(e.stopPropagation){e.stopPropagation();e.preventDefault()}return leave_message}if(window.esperjsshared!=null&&window.esperjsshared.onbeforeunloadEventTarget!=null)window.esperjsshared.onbeforeunloadEventTarget.fireBrowserClosed()}window.onbeforeunload=goodbye};
HQHelpDialogHelper=function(){};HQHelpDialogHelper.openHelp=function(bookmark){var url="documentation.html#"+bookmark;HQWindowUtil.openNewWindowFullscreen(HQUriUtil.getUrlViews(url),"Client Documentation",true)};HQCodeMirrorUtil=function(){};HQCodeMirrorUtil.getDefaultReadOnlyConfig=function(){var config={};config.readOnly=true;HQObjectUtil.mergeObject(HQ_CODEMIRROR_CONFIG,config);return config};
HQCodeMirrorUtil.getDefaultConfig=function(){var config={};HQObjectUtil.mergeObject(HQ_CODEMIRROR_CONFIG,config);return config};HQValidationUtil=function(){};HQValidationUtil.validateIntOrBlank=function(value){if(!HQStringUtil.isPopulated(value))return true;return HQValidationUtil.validateIntValueType(value)};HQValidationUtil.validateIntGreaterZero=function(value){if(!HQStringUtil.isPopulated(value))return false;if(!HQValidationUtil.validateIntValueType(value))return false;return parseInt(value)};
HQValidationUtil.validateIntValueType=function(value){return!isNaN(parseInt(value))&&isFinite(value)};HQEventletClickCallbackRegression=function(){};HQEventletClickCallbackRegression.prototype.handleClicked=function(event){var text=JSON.stringify(event);alert("HQEventletClickCallbackRegression: Click callback, object: "+text)};HQSizeUtil=function(){};
HQSizeUtil.setSize=function($element,parameters,minWidth,minHeight){var heightDone=false;var widthDone=false;if(parameters!=null){if(parameters.height!=null){heightDone=true;if(typeof parameters.height=="string")$element.css("height",parameters.height);else $element.css("height",parameters.height+"px")}if(parameters.width!=null){widthDone=true;if(typeof parameters.width=="string")$element.css("width",parameters.width);else $element.css("width",parameters.width+"px")}}if(!widthDone&&$element.parent().parent().width()>
0){var widthContainer=Math.max(minWidth,$element.parent().parent().width());$element.css("width",widthContainer)}if(!heightDone&&$element.parent().parent().height()>0){var heightContainer=Math.max(minHeight,$element.parent().parent().height());$element.css("height",heightContainer)}};HQCookieUtil=function(){};HQCookieUtil.setUserCookie=function(sessionToken){$.cookie("EsperHQApp-User-Agent",sessionToken,{path:"/esperhqapp"})};
HQCookieUtil.clearUserCookie=function(){$.cookie("EsperHQApp-User-Agent",null,{path:"/esperhqapp"})};